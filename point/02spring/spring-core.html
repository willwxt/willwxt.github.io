<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring核心 | SUCKED BloG</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/logo.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.42575a28.js" as="script"><link rel="preload" href="/assets/js/2.0d7d09b8.js" as="script"><link rel="preload" href="/assets/js/37.7d1fcf79.js" as="script"><link rel="prefetch" href="/assets/js/10.1a30ebe5.js"><link rel="prefetch" href="/assets/js/100.022f696a.js"><link rel="prefetch" href="/assets/js/101.06eb0acb.js"><link rel="prefetch" href="/assets/js/102.e944c220.js"><link rel="prefetch" href="/assets/js/103.45b9da9a.js"><link rel="prefetch" href="/assets/js/104.cf53f5d1.js"><link rel="prefetch" href="/assets/js/105.200d7fe5.js"><link rel="prefetch" href="/assets/js/106.a0cc3502.js"><link rel="prefetch" href="/assets/js/107.4a71d17e.js"><link rel="prefetch" href="/assets/js/108.d7a39a75.js"><link rel="prefetch" href="/assets/js/109.35619cf9.js"><link rel="prefetch" href="/assets/js/11.f78ae8b3.js"><link rel="prefetch" href="/assets/js/110.f667d72e.js"><link rel="prefetch" href="/assets/js/111.de83ce6f.js"><link rel="prefetch" href="/assets/js/112.417d40bf.js"><link rel="prefetch" href="/assets/js/113.0f26c1ca.js"><link rel="prefetch" href="/assets/js/114.c7014acb.js"><link rel="prefetch" href="/assets/js/115.b502c0f1.js"><link rel="prefetch" href="/assets/js/116.10fb230e.js"><link rel="prefetch" href="/assets/js/117.f7cb9e2a.js"><link rel="prefetch" href="/assets/js/118.978d3075.js"><link rel="prefetch" href="/assets/js/119.09272191.js"><link rel="prefetch" href="/assets/js/12.140aa2af.js"><link rel="prefetch" href="/assets/js/120.32b5dbd7.js"><link rel="prefetch" href="/assets/js/121.8d618bbb.js"><link rel="prefetch" href="/assets/js/122.dcd4190d.js"><link rel="prefetch" href="/assets/js/123.2ee061d1.js"><link rel="prefetch" href="/assets/js/124.5a3760a7.js"><link rel="prefetch" href="/assets/js/125.a874a4bc.js"><link rel="prefetch" href="/assets/js/126.c6c6b7e6.js"><link rel="prefetch" href="/assets/js/127.38c35051.js"><link rel="prefetch" href="/assets/js/128.8d775ac8.js"><link rel="prefetch" href="/assets/js/129.6100ddb1.js"><link rel="prefetch" href="/assets/js/13.b2a6e590.js"><link rel="prefetch" href="/assets/js/130.9a83da2a.js"><link rel="prefetch" href="/assets/js/131.22de7670.js"><link rel="prefetch" href="/assets/js/132.f88798bf.js"><link rel="prefetch" href="/assets/js/133.925bbfed.js"><link rel="prefetch" href="/assets/js/134.481fad71.js"><link rel="prefetch" href="/assets/js/135.c3efb09b.js"><link rel="prefetch" href="/assets/js/136.758c447a.js"><link rel="prefetch" href="/assets/js/137.dcde1032.js"><link rel="prefetch" href="/assets/js/138.616a346b.js"><link rel="prefetch" href="/assets/js/139.b58dd07f.js"><link rel="prefetch" href="/assets/js/14.15374560.js"><link rel="prefetch" href="/assets/js/140.62b4c7ea.js"><link rel="prefetch" href="/assets/js/15.ffd155fa.js"><link rel="prefetch" href="/assets/js/16.feb1b022.js"><link rel="prefetch" href="/assets/js/17.6d491eb6.js"><link rel="prefetch" href="/assets/js/18.03ddaa95.js"><link rel="prefetch" href="/assets/js/19.021bbcc8.js"><link rel="prefetch" href="/assets/js/20.8aa708b0.js"><link rel="prefetch" href="/assets/js/21.59d7a21e.js"><link rel="prefetch" href="/assets/js/22.21597439.js"><link rel="prefetch" href="/assets/js/23.77303f0b.js"><link rel="prefetch" href="/assets/js/24.0789ed5b.js"><link rel="prefetch" href="/assets/js/25.244a12a8.js"><link rel="prefetch" href="/assets/js/26.a6ee95e4.js"><link rel="prefetch" href="/assets/js/27.9e0f0e9d.js"><link rel="prefetch" href="/assets/js/28.189031c5.js"><link rel="prefetch" href="/assets/js/29.b3100d33.js"><link rel="prefetch" href="/assets/js/3.2a5d4cd5.js"><link rel="prefetch" href="/assets/js/30.fe8fe8c0.js"><link rel="prefetch" href="/assets/js/31.86fec3f7.js"><link rel="prefetch" href="/assets/js/32.24cac061.js"><link rel="prefetch" href="/assets/js/33.f1db2ed0.js"><link rel="prefetch" href="/assets/js/34.c220692f.js"><link rel="prefetch" href="/assets/js/35.9e7b4779.js"><link rel="prefetch" href="/assets/js/36.0cb1d1bc.js"><link rel="prefetch" href="/assets/js/38.bc9bc4b3.js"><link rel="prefetch" href="/assets/js/39.10801a2a.js"><link rel="prefetch" href="/assets/js/4.b4d9a5aa.js"><link rel="prefetch" href="/assets/js/40.c980543d.js"><link rel="prefetch" href="/assets/js/41.3f4581d8.js"><link rel="prefetch" href="/assets/js/42.60b85cdf.js"><link rel="prefetch" href="/assets/js/43.1338528d.js"><link rel="prefetch" href="/assets/js/44.786fc51f.js"><link rel="prefetch" href="/assets/js/45.d65f6744.js"><link rel="prefetch" href="/assets/js/46.543c2b26.js"><link rel="prefetch" href="/assets/js/47.59f19ed2.js"><link rel="prefetch" href="/assets/js/48.60de6b25.js"><link rel="prefetch" href="/assets/js/49.f3df62ef.js"><link rel="prefetch" href="/assets/js/5.013522c1.js"><link rel="prefetch" href="/assets/js/50.fd9871d6.js"><link rel="prefetch" href="/assets/js/51.1fb1863e.js"><link rel="prefetch" href="/assets/js/52.c06ce3f3.js"><link rel="prefetch" href="/assets/js/53.a3d55203.js"><link rel="prefetch" href="/assets/js/54.89ac64bc.js"><link rel="prefetch" href="/assets/js/55.ccf38d1e.js"><link rel="prefetch" href="/assets/js/56.ffb8595b.js"><link rel="prefetch" href="/assets/js/57.5f1bd695.js"><link rel="prefetch" href="/assets/js/58.7463616d.js"><link rel="prefetch" href="/assets/js/59.ea4eb5dd.js"><link rel="prefetch" href="/assets/js/6.72ad7c85.js"><link rel="prefetch" href="/assets/js/60.a2add219.js"><link rel="prefetch" href="/assets/js/61.3eae0362.js"><link rel="prefetch" href="/assets/js/62.801d1658.js"><link rel="prefetch" href="/assets/js/63.b47a17bb.js"><link rel="prefetch" href="/assets/js/64.d5e2bdea.js"><link rel="prefetch" href="/assets/js/65.24d540f4.js"><link rel="prefetch" href="/assets/js/66.09a1ae52.js"><link rel="prefetch" href="/assets/js/67.75bd38e7.js"><link rel="prefetch" href="/assets/js/68.1fe6956e.js"><link rel="prefetch" href="/assets/js/69.d3306c2d.js"><link rel="prefetch" href="/assets/js/7.60760bb7.js"><link rel="prefetch" href="/assets/js/70.95aa4503.js"><link rel="prefetch" href="/assets/js/71.7065ebf0.js"><link rel="prefetch" href="/assets/js/72.55ae5081.js"><link rel="prefetch" href="/assets/js/73.c7624eee.js"><link rel="prefetch" href="/assets/js/74.63bcc7bd.js"><link rel="prefetch" href="/assets/js/75.e2731e20.js"><link rel="prefetch" href="/assets/js/76.1711af80.js"><link rel="prefetch" href="/assets/js/77.f1c4e2d3.js"><link rel="prefetch" href="/assets/js/78.900bc856.js"><link rel="prefetch" href="/assets/js/79.a1b8c47b.js"><link rel="prefetch" href="/assets/js/8.0c261cf2.js"><link rel="prefetch" href="/assets/js/80.7cf435bf.js"><link rel="prefetch" href="/assets/js/81.fa33b2af.js"><link rel="prefetch" href="/assets/js/82.cdabd386.js"><link rel="prefetch" href="/assets/js/83.879fc50c.js"><link rel="prefetch" href="/assets/js/84.7e460788.js"><link rel="prefetch" href="/assets/js/85.339356d5.js"><link rel="prefetch" href="/assets/js/86.d526418c.js"><link rel="prefetch" href="/assets/js/87.12877e38.js"><link rel="prefetch" href="/assets/js/88.d5a7d193.js"><link rel="prefetch" href="/assets/js/89.2f4a62c2.js"><link rel="prefetch" href="/assets/js/9.50eda380.js"><link rel="prefetch" href="/assets/js/90.6d83f5bf.js"><link rel="prefetch" href="/assets/js/91.f3364825.js"><link rel="prefetch" href="/assets/js/92.158fcc7a.js"><link rel="prefetch" href="/assets/js/93.0c4e5f88.js"><link rel="prefetch" href="/assets/js/94.c5725f80.js"><link rel="prefetch" href="/assets/js/95.dc61d501.js"><link rel="prefetch" href="/assets/js/96.3a598fc5.js"><link rel="prefetch" href="/assets/js/97.712aa8be.js"><link rel="prefetch" href="/assets/js/98.e757fe7a.js"><link rel="prefetch" href="/assets/js/99.1418024a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SUCKED BloG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/other/index.html" class="nav-link">
  index
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  question
</a></div><div class="nav-item"><a href="/audition/index.html" class="nav-link">
  audition
</a></div><div class="nav-item"><a href="/point/index.html" class="nav-link">
  point
</a></div><div class="nav-item"><a href="/work/index.html" class="nav-link">
  work
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="url" class="dropdown-title"><span class="title">url</span> <span class="arrow down"></span></button> <button type="button" aria-label="url" class="mobile-dropdown-title"><span class="title">url</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/config.html" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="https://git.code.tencent.com/u/nampy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯工蜂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/willwxt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nbcb.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/other/index.html" class="nav-link">
  index
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  question
</a></div><div class="nav-item"><a href="/audition/index.html" class="nav-link">
  audition
</a></div><div class="nav-item"><a href="/point/index.html" class="nav-link">
  point
</a></div><div class="nav-item"><a href="/work/index.html" class="nav-link">
  work
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="url" class="dropdown-title"><span class="title">url</span> <span class="arrow down"></span></button> <button type="button" aria-label="url" class="mobile-dropdown-title"><span class="title">url</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/config.html" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="https://git.code.tencent.com/u/nampy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯工蜂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/willwxt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nbcb.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring核心</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/point/02spring/spring-core.html#概述" class="sidebar-link">概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#spring提供的基础功能" class="sidebar-link">Spring提供的基础功能</a></li></ul></li><li><a href="/point/02spring/spring-core.html#ioc容器" class="sidebar-link">IoC容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#容器介绍" class="sidebar-link">容器介绍</a></li><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#bean概述" class="sidebar-link">Bean概述</a></li><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#依赖" class="sidebar-link">依赖</a></li><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#bean作用域" class="sidebar-link">Bean作用域</a></li><li class="sidebar-sub-header"><a href="/point/02spring/spring-core.html#自定义bean的特性" class="sidebar-link">自定义Bean的特性</a></li></ul></li><li><a href="/point/02spring/spring-core.html#第三节" class="sidebar-link">第三节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第四节" class="sidebar-link">第四节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第五节" class="sidebar-link">第五节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第六节" class="sidebar-link">第六节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第七节" class="sidebar-link">第七节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第八节" class="sidebar-link">第八节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第九节" class="sidebar-link">第九节</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/point/02spring/spring-core.html#第十节" class="sidebar-link">第十节</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="spring核心"><a href="#spring核心" class="header-anchor">#</a> Spring核心</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <ul><li>Spring为了简化企业级开发, 实现/替代EJB; (通过配置管理JavaBean依赖关系, 事务管理)</li> <li>EJB : 企业级JavaBean, 在服务器领域使用JavaBean, 基于分布式事务, 技术复杂, 被轻量级的Spring干废</li></ul> <h3 id="spring提供的基础功能"><a href="#spring提供的基础功能" class="header-anchor">#</a> Spring提供的基础功能</h3> <h4 id="核心容器-ioc-和-aop"><a href="#核心容器-ioc-和-aop" class="header-anchor">#</a> 核心容器/IoC 和 AOP</h4> <p>实现组件: <font color="11CC00">spring-core , spring-bean , spring-context</font></p> <ul><li><p>spring-core 和 spring-bean主要实现了IOC/DI功能</p> <ul><li>提供 <font color="11CC00">BeanFactory</font> , 我们可以不再编程去实现单例模式</li></ul></li> <li><p>spring-context 提供一个框架式的对象访问方式, 重点接口 <font color="11CC00">ApplicationContext</font></p></li> <li><p>spring-expression 提供强大的语言表达式</p></li> <li><p>spring-aop 模块提供了面向切面的编程实现</p> <ul><li>允许我们定义方法的拦截点/切入点, 以便解耦应该被分离的功能实现</li></ul></li> <li><p>spring-aspect 模块, 提供与AspectJ集成</p></li> <li><p>spring-instrument 模块提供了类植入支持, 类加载器的实现, 可以应用在特定的应用服务器中 (比如tomcat)</p> <ul><li>spring-instrument-tomcat 模块包含支持 Tomcat 的植入代理</li></ul></li></ul> <h4 id="数据集成-访问"><a href="#数据集成-访问" class="header-anchor">#</a> 数据集成 / 访问</h4> <p>由JDBC, ORM, OXM, JMS和事务模块组成</p> <ul><li>spring-jdbc 提供了JDBC抽象层, 消除繁琐的JDBC以及各数据库厂商的适配编码</li> <li>spring-tx 提供声明式事务</li> <li>spring-orm 提供集成 <font color="11CC00">对象关系映射</font> 框架(比如mybatis, JPA)的能力</li> <li>spring-oxm 提供对象和XML的映射</li> <li>spring-jms 用于生产和消费消息, 集成了spring-messaging</li></ul> <h4 id="web"><a href="#web" class="header-anchor">#</a> Web</h4> <p>由 <font color="11CC00">spring-web, spring-webmvc, spring-websocket</font> 模块组成</p> <ul><li>spring-web 提供基本的面向web的集成功能, 比如多部分文件上传功能, 提供Servlet维度的IOC容器</li> <li>spring-mvc 用于web应用的 MVC 模型</li></ul> <h4 id="日志"><a href="#日志" class="header-anchor">#</a> 日志</h4> <ul><li>日志是spring唯一强制性的外部依赖, 因为spring整合了很多工具, spring希望统一日志配置</li> <li>spring默认使用 commons-logging, 官网也提供了替换 SLF4J 的方法</li></ul> <h2 id="ioc容器"><a href="#ioc容器" class="header-anchor">#</a> IoC容器</h2> <h3 id="容器介绍"><a href="#容器介绍" class="header-anchor">#</a> 容器介绍</h3> <ul><li><font color="11CC00">IoC控制反转</font> <a href="https://github.com/DocsHome/spring-docs/blob/master/pages/core/IoC-container.md" target="_blank" rel="noopener noreferrer">IoC容器官方文档翻译<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  (控制: 资源的获取方式,分为主动式和被动式)
<ul><li>描述对象定义和依赖的过程, 原来是先依次创建对象中的所有依赖, 再创建对象; 现在是对象先实例化, 再将依赖注入; 这个过程是反向的; 又称DI依赖注入;</li></ul></li> <li><font color="11CC00">DI依赖注入</font> <ul><li>当容器发现一个类运行时需要依赖, 会通过反射把容器中的bean注入到该类中</li></ul></li> <li><font color="11CC00">BeanFactory</font> 提供配置等基本功能, 可以管理任何对象; <font color="11CC00">ApplicationContext</font> 在其基础上添加了更多企业功能</li> <li><font color="11CC00">bean对象</font> , 构成应用的骨架, IOC容器管理的主要对象</li></ul> <h4 id="容器概述"><a href="#容器概述" class="header-anchor">#</a> 容器概述</h4> <p>ApplicationContext是IOC容器的代表, 负责实例化, 配置, 组装bean</p> <p>Spring提供了读取xml配置文件的实现类 <code>ClassPathXmlApplicationContext</code> , 还支持Java配置</p> <p>xml配置文件中配置bean数据</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--唯一id和指定全类名-&gt;
    &lt;!-- collaborators and configuration for this bean go here --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>每条 <code>&lt;bean/&gt;</code> 数据在容器内部表示为 <code>BeanDefinition</code> 对象</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//实例化IoC容器 xml配置文件版</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;daos.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//此外还可以用 groovy 配置bean, Java类配置bean</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="bean概述"><a href="#bean概述" class="header-anchor">#</a> Bean概述</h3> <p>无论xml还是其他配置方法, 每个bean在IoC容器中以 <font color="11CC00">BeanDefinition</font> 对象形式存在, 并包含:</p> <ul><li>限定包类名</li> <li>bean配置项: 作用域, 生命周期回调函数</li> <li>bean需要引用的其他依赖关系</li> <li>其他配置: 用于对象的创建</li></ul> <h4 id="bean的命名"><a href="#bean的命名" class="header-anchor">#</a> bean的命名</h4> <ul><li>一般来说使用id和name足够, 而且name可以定义多个</li> <li>别名 Alias : 可以取个别名, 好兼容别处设置</li></ul> <h4 id="bean实例化"><a href="#bean实例化" class="header-anchor">#</a> bean实例化</h4> <ol><li>通常反射调用构造方法创建bean, 和new差不多</li> <li>通过工厂方法创建bean
<ul><li>可以通过静态工厂方法创建bean</li> <li>可以通过实例工厂+普通方法创建bean</li></ul></li></ol> <h3 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h3> <p>一般情况下bean都需要互相依赖, 协同工作</p> <ol><li>基于构造函数的依赖注入
<ol><li>在xml配置的bean中使用构造器参数</li></ol></li> <li>基于Setter方法的注入
<ol><li>在xml配置中使用properties</li></ol></li> <li>引用其他bean: ref 元素</li> <li>集合, list</li> <li>null, 空字符串</li></ol> <h4 id="depends-on属性"><a href="#depends-on属性" class="header-anchor">#</a> depends-on属性</h4> <p>显式强制初始化, 指定初始化时间依赖性</p> <h4 id="懒加载bean"><a href="#懒加载bean" class="header-anchor">#</a> 懒加载bean</h4> <p>lazy-init 属性</p> <h4 id="自动装配"><a href="#自动装配" class="header-anchor">#</a> 自动装配</h4> <p>Spring让ApplicationContext自动解析这些关联关系</p> <ol><li>明显减少指定属性和构造函数</li> <li>易于开发, 方便开发</li> <li>容易出现歧义</li></ol> <h4 id="方法注入"><a href="#方法注入" class="header-anchor">#</a> 方法注入</h4> <p>单例A想要每次调用多实例B时候使用</p> <h3 id="bean作用域"><a href="#bean作用域" class="header-anchor">#</a> Bean作用域</h3> <ul><li>singleton	单例, 唯一实例</li> <li>prototype   多个实例</li> <li>基于Web的ApplicationContext才能使用的作用域
<ul><li>request         单个http请求</li> <li>session          http session生命周期</li> <li>application    servlet context生命周期</li> <li>websocket     websocket生命周期</li></ul></li></ul> <h4 id="singleton单例作用域"><a href="#singleton单例作用域" class="header-anchor">#</a> singleton单例作用域</h4> <p>Spring的单例作用域是以容器为前提</p> <h4 id="prototype原型作用域"><a href="#prototype原型作用域" class="header-anchor">#</a> prototype原型作用域</h4> <p>每次被注入, 或者调用getBean() 都会得到全新的实例</p> <h3 id="自定义bean的特性"><a href="#自定义bean的特性" class="header-anchor">#</a> 自定义Bean的特性</h3> <p>Spring提供了很多可用于自定义bean的特性</p> <h4 id="生命周期回调"><a href="#生命周期回调" class="header-anchor">#</a> 生命周期回调</h4> <ol><li><code>InitializingBean</code> 和 <code>DisposableBean</code> , bean初始化和销毁时执行, 不推荐使用</li> <li><code>@PostConstruct</code> 和 <code>@PreDestroy</code> JSR-250规范, 不会耦合到spring的特定接口, 推荐使用, 通常是最佳实践</li> <li><code>init-method</code> 和 <code>destroy-method</code></li> <li><code>BeanPostProcessor</code> 容器扩展点</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>调用顺序 @PostConstruct - InitializingBean - init-method
销毁也是同样顺序
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>LifeCycle , LifecycleProcessor , SmartLifecycle , Phased</p> <h4 id="applicationcontextaware-和-beannameaware"><a href="#applicationcontextaware-和-beannameaware" class="header-anchor">#</a> ApplicationContextAware 和 BeanNameAware</h4> <p><strong>ApplicationContextAware</strong>: 当IoC创建了该接口的实现bean, 会 <font color="11CC00">为该实例提供IoC</font> 自身的引用, 这样bean可以操作IoC, 比如常用的 <font color="11CC00">ConfigurableApplicationContext</font></p> <p><strong>BeanNameAware</strong>  该接口实现类会在该bean属性配置完毕之后, 初始化回调之前, 调用setBeanName方法</p> <h4 id="其他的aware接口"><a href="#其他的aware接口" class="header-anchor">#</a> 其他的Aware接口</h4> <blockquote><p>进度报告 <a href="https://github.com/DocsHome/spring-docs/blob/master/pages/core/IoC-container.md#beans-factory-autowire-candidate" target="_blank" rel="noopener noreferrer">https://github.com/DocsHome/spring-docs/blob/master/pages/core/IoC-container.md#beans-factory-autowire-candidate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>1.7. bean定义的继承</p></blockquote> <h4 id="其他-aware-接口"><a href="#其他-aware-接口" class="header-anchor">#</a> 其他 Aware 接口</h4> <h4 id="bean生命周期"><a href="#bean生命周期" class="header-anchor">#</a> bean生命周期</h4> <p>支持JSR-250规范的回调, 对于Spring生命周期回调则需要实现 <font color="11CC00">InitializingBean, DisposableBean, Lifecycle, BeanFactoryAware, BeanNameAware, MessageSourceAware</font> 这些接口</p> <ul><li>bean 作用域 @Scope</li> <li>bean 命名/别名, 描述</li></ul> <h4 id="configuration使用"><a href="#configuration使用" class="header-anchor">#</a> Configuration使用</h4> <h4 id="profiles环境抽象"><a href="#profiles环境抽象" class="header-anchor">#</a> Profiles环境抽象</h4> <h4 id="applicationcontext的额外功能"><a href="#applicationcontext的额外功能" class="header-anchor">#</a> ApplicationContext的额外功能</h4> <p>标准事件和自定义事件</p> <ul><li>ApplicationListener 实现类部署到上下文中, 每次有ApplicationEvent发布到上下文中, Listener都会收到通知</li></ul> <h1 id="msb课程内容"><a href="#msb课程内容" class="header-anchor">#</a> msb课程内容</h1> <p><a href="https://github.com/DocsHome" target="_blank" rel="noopener noreferrer">翻译网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://repo.spring.io/release/" target="_blank" rel="noopener noreferrer">spring的jar包的下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://repo.spring.io/release/org/springframework/spring/5.2.8.RELEASE/" target="_blank" rel="noopener noreferrer">spring framework<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> dist(jar包) doc(文档)</p> <p>有60+ jar包, 模块化, 可以只使用部分, 按需导入jar包</p> <p>spring 八个模块, 需要导入的jar包</p> <p>创建普通项目, 导入jar包, 编写spring的配置文件, 使用spring的入口: ApplicationContext 接口 拥有两个实现, 项目路径 和 当前文件系统路径 尝试IOC注入</p> <p>测试出 IOC 注入的对象默认是什么时候创建的? 在容器创建完成之前就创建完成了</p> <h2 id="第三节"><a href="#第三节" class="header-anchor">#</a> 第三节</h2> <p>spring的作用域 单例(直接加载) 原型(懒加载) (req session 几乎不用)</p> <p>利用工厂模式创建bean对象 xml配置</p> <p>beanfactory 接口是Spring内部工厂的顶层规范 Spring的容器都是它的具体实现 里面有 getBean containsBean 等方法</p> <p>factorybean 接口定义了能生产或修饰对象生成的工厂Bean规范, 使用这个接口可以 自定义自己的工厂, 然后将这个bean 交给spring的IOC容器管理 , 是spring创建bean方式的一种补充(自定义) 都是懒加载</p> <p>可以设置spring容器 在bean生命周期初始化, 销毁的方法 , 调用关闭IOC容器方法</p> <p>BeanPostProcesser 对创建bean的过程进行增强 在初始化之前调用... 在初始化之后调用... springboot中大量使用了PostProcesser</p> <p>spring 创建第三方对象(连接池..)</p> <p>spring xml 中读取外部的配置文件 , 使用 spring xml 中的 context 命名空间 , value 中使用表达式, 需要注意表达式会读取到系统的环境变量</p> <p>spring xml 自动装配 <code>autowire</code> 属性 byName (依然对应set方法名) byType (所有地方对应class的对象都被装配了) constructor (比较复杂的装配先后顺序)</p> <p>问题 为什么 byType 会加载环境变量 - map中的 Object 会被自动装备进环境变量</p> <p>SpEL 的使用 spring express language</p> <p>引入bean对象, bean对象的属性, 支持运算符操作, 调用静态方法, 非静态方法</p> <h2 id="第四节"><a href="#第四节" class="header-anchor">#</a> 第四节</h2> <p>spring IOC 的注解使用</p> <p>Junit 单元测试</p> <p>@Component Controller Service Repository 修饰后都可以注册类</p> <p>使用注解, spring容器 需要配置注解扫描路径 (xml 配置 注解配置 需要 context 命名空间)</p> <p>使用注解, 没有指定id , 默认按类名来指定(首字母小写)</p> <p>@Scope 注解</p> <p>context 配置扫描路径可以按规则排除或包括 @ComponentScan注解</p> <p>@Autowired 启用自动装配/注入 (注入对应class 也就是默认使用byType, type重复了再 byName, 反正又是复杂的查找) - 修饰方法, 创建对象的时候方法会调用 , 方法参数自动传入 ;</p> <p>@Qualifier 当注入具有相同类型时候 , 指定注入对象的 class 名</p> <p>@Autowired vs @Resource 相同的功能, 区别 , spring提供和jdk提供 , 先按照类型/先按照名称 查找并自动装配</p> <p>泛型依赖注入 byName, byType 之后, 再通过泛型查找 , 通过抽取泛型, 实现装配功能</p> <h2 id="第五节"><a href="#第五节" class="header-anchor">#</a> 第五节</h2> <p>Spring AOP</p> <p>思路: 加减乘除方法的操作前后打印日志</p> <p>讲解了一些动态代理 Proxy.newProxyInstance , jdk包下的反射的劣势: 必须要实现接口</p> <p>写了很多动态代理的代码, 结果 AOP 就可以轻松实现这个功能</p> <p>AOP 概念, 面向切面编程概念, 横切面, 通知, 切面, 连接点, 切入点(连接点的子集), 复杂难懂...</p> <p>AOP的通知类型概念, 应用场景, AOP的使用, 注解 @Aspect , xml配置</p> <p>通知注解类型 @Before @After @AfterReturing @AfterThrowing @Around</p> <p>只讲解了基本使用, 主要写切面类</p> <h2 id="第六节"><a href="#第六节" class="header-anchor">#</a> 第六节</h2> <p>把日志信息补全</p> <p>spring 通过是否实现接口自动选择使用 jdk代理 或 cglib代理 , 两个代理的效率比较</p> <p>之前的基本写法, 切入点表达式 / 最精确匹配 ,</p> <p>而实际常用的 通配符表达式</p> <p>(* 匹配字符, 匹配参数类型, 注意 <code>*</code> 无法匹配多级的目录)</p> <p>(.. 表达式 可以匹配多个, 比如多级路径, 多个参数) 通过这两个组合出很多通配符</p> <p>(&amp;&amp; || ! 表达式 ...)</p> <p>@AfterReturning(&quot;execution(* *(..)))&quot;) // 切所有..</p> <p>从这个通配符可以知道, 我们写项目的时候, 类名需要起的规范, 以便于通配符的匹配</p> <p>通知的政策执行顺序 政策执行: before - after - afterreTurning  异常结束: before - after - afterThrowing</p> <p>JoinPoint - AOP方法的参数 - 用于获取方法的信息, 方法参数的信息 getArgs</p> <p>注解中的参数, 注解中配置返回值 Returning 异常 Throwing  参数 argNames, 并对应参数列表中的定义名字</p> <p>通知方法的参数要求比较高, 其他的方法签名没有影响</p> <p>多个匹配表达式相同, 抽象共用 @Pointcut 注解, 定义没有返回值的空方法(声明方法), 添加注解, 直接调用该方法名</p> <p>@Around 使用 , 需要传入特殊的参数 , 自定义能力更强的一种代理方式 , 可以调用原方法, 可以修改调用结果了</p> <p>环绕通知优先于普通通知, 执行的顺序是 : 环绕前置 - before - 环绕后置 - 环绕返回 - after - afterReturning/afterThrowing</p> <p>当多个切面类作用同个方法的顺序, 默认按照切面类的首字母进行字典排序, 也可以注解@Order 指定顺序, 越小优先</p> <p>声明式事务, @Transaction  事务管理器 TransactionManager</p> <h2 id="第七节"><a href="#第七节" class="header-anchor">#</a> 第七节</h2> <p>使用 spring xml 的 aop 命名空间配置方式 代替上节课的 aop 注解方式 包括声明切面, 通配符, 通知方法 ...</p> <p>JDBC Template 玩玩就好, 没人用</p> <p>使用jdbcTemplate 进行数据库操作, 增删改 查 , sqlDate是utilDate的子集</p> <p>数据库事务自动提交 <code>select @@autocommit</code> 代码默认不开启事务是由数据库控制, 1是自动提交事务</p> <p>spring 支持编程式事务(自己写代码), 声明式事务(使用AOP) 两种</p> <p>事务 - 题外话 , 跨行转账 - 多个系统间的分布式事务</p> <p>使用 spring 自带的事务管理器 springxml 中需要使用 tx 命名空间 , 开启基于注解的事务管理配置</p> <p>@Transactional 注解, 会对方法中对应操作进行整体的提交或回滚</p> <p>事务和 try catch 的使用</p> <p>声明式事务的几个参数 , 传播特性 , 隔离级别 , 超时时间, noRollBackFor, RollBackFor , readonly</p> <p>spring事务的传播特性  传播特性使用 注解参数 和 xml参数 进行配置</p> <p>NESTED 在于嵌套事务受外层事务影响</p> <p>外层调用使用AOP, 传播特性, 内层调用是使用普通事务, 区别在于是否使用了 (对象点方法) , 直接调用的AOP无法生成代理代码</p> <p>xml参数 AOP 事务建议</p> <p>源码 - 从面试题作为切入点进行讲解</p> <p>dubug , 没有写构造方法, 其实是调用了父类的构造方法</p> <p>创建配置类, 加入系统环境变量, 读取xml文件, 解析表达式,</p> <p>各种观察者模式 , 解析xml标签</p> <h2 id="第八节"><a href="#第八节" class="header-anchor">#</a> 第八节</h2> <p>继续看源码</p> <p>创建BeanFactory , 忽略一些 aware , 创建好默认的DefaultListableBeanFactory</p> <p>Reader 读取 xml</p> <p>HandlerResolver - 处理xml的命名空间</p> <p>ParseDelegate - 定义标签属性值</p> <p>通过命名空间解析xml, 通过判断 bean 或者 自定义的命名空间 , 使用对应的 Handler 进行解析处理</p> <p>读取解析 component-scan 这条配置 , 读取classpath下的class, 读取注解 ..</p> <p>读取解析 bean 标签 , 获取 id , name , 判断唯一 , 获取class , scope 等所有属性 , 解析子标签</p> <p>将信息放进DefaultListableBeanFactory维护的map中</p> <p>AnnotationConfigUtils 默认给map中赋值了一些参数</p> <p>初始化对象 , 解析spring EL , 对象进行增强 ApplicationContextAwareProcessor</p> <h2 id="第九节"><a href="#第九节" class="header-anchor">#</a> 第九节</h2> <p>invokeBeanFactoryPostProcessors 调用beanFactory的增强方法 , 解析 Processor</p> <p>解析注解, 处理注解</p> <p>finishBeanFactoryInitialization 生成Bean</p> <p>earlySingletonExposure 循环引用问题</p> <h2 id="第十节"><a href="#第十节" class="header-anchor">#</a> 第十节</h2> <p>jdk 动态代理源码</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/4/2021, 12:31:44 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.42575a28.js" defer></script><script src="/assets/js/2.0d7d09b8.js" defer></script><script src="/assets/js/37.7d1fcf79.js" defer></script>
  </body>
</html>
