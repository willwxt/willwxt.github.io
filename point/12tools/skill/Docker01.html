<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | SUCKED BloG</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/logo.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.42575a28.js" as="script"><link rel="preload" href="/assets/js/2.0d7d09b8.js" as="script"><link rel="preload" href="/assets/js/71.7065ebf0.js" as="script"><link rel="prefetch" href="/assets/js/10.1a30ebe5.js"><link rel="prefetch" href="/assets/js/100.022f696a.js"><link rel="prefetch" href="/assets/js/101.06eb0acb.js"><link rel="prefetch" href="/assets/js/102.e944c220.js"><link rel="prefetch" href="/assets/js/103.45b9da9a.js"><link rel="prefetch" href="/assets/js/104.cf53f5d1.js"><link rel="prefetch" href="/assets/js/105.200d7fe5.js"><link rel="prefetch" href="/assets/js/106.a0cc3502.js"><link rel="prefetch" href="/assets/js/107.4a71d17e.js"><link rel="prefetch" href="/assets/js/108.d7a39a75.js"><link rel="prefetch" href="/assets/js/109.35619cf9.js"><link rel="prefetch" href="/assets/js/11.f78ae8b3.js"><link rel="prefetch" href="/assets/js/110.f667d72e.js"><link rel="prefetch" href="/assets/js/111.de83ce6f.js"><link rel="prefetch" href="/assets/js/112.417d40bf.js"><link rel="prefetch" href="/assets/js/113.0f26c1ca.js"><link rel="prefetch" href="/assets/js/114.c7014acb.js"><link rel="prefetch" href="/assets/js/115.b502c0f1.js"><link rel="prefetch" href="/assets/js/116.10fb230e.js"><link rel="prefetch" href="/assets/js/117.f7cb9e2a.js"><link rel="prefetch" href="/assets/js/118.978d3075.js"><link rel="prefetch" href="/assets/js/119.09272191.js"><link rel="prefetch" href="/assets/js/12.140aa2af.js"><link rel="prefetch" href="/assets/js/120.32b5dbd7.js"><link rel="prefetch" href="/assets/js/121.8d618bbb.js"><link rel="prefetch" href="/assets/js/122.dcd4190d.js"><link rel="prefetch" href="/assets/js/123.2ee061d1.js"><link rel="prefetch" href="/assets/js/124.5a3760a7.js"><link rel="prefetch" href="/assets/js/125.a874a4bc.js"><link rel="prefetch" href="/assets/js/126.c6c6b7e6.js"><link rel="prefetch" href="/assets/js/127.38c35051.js"><link rel="prefetch" href="/assets/js/128.8d775ac8.js"><link rel="prefetch" href="/assets/js/129.6100ddb1.js"><link rel="prefetch" href="/assets/js/13.b2a6e590.js"><link rel="prefetch" href="/assets/js/130.9a83da2a.js"><link rel="prefetch" href="/assets/js/131.22de7670.js"><link rel="prefetch" href="/assets/js/132.f88798bf.js"><link rel="prefetch" href="/assets/js/133.925bbfed.js"><link rel="prefetch" href="/assets/js/134.481fad71.js"><link rel="prefetch" href="/assets/js/135.c3efb09b.js"><link rel="prefetch" href="/assets/js/136.758c447a.js"><link rel="prefetch" href="/assets/js/137.dcde1032.js"><link rel="prefetch" href="/assets/js/138.616a346b.js"><link rel="prefetch" href="/assets/js/139.b58dd07f.js"><link rel="prefetch" href="/assets/js/14.15374560.js"><link rel="prefetch" href="/assets/js/140.62b4c7ea.js"><link rel="prefetch" href="/assets/js/15.ffd155fa.js"><link rel="prefetch" href="/assets/js/16.feb1b022.js"><link rel="prefetch" href="/assets/js/17.6d491eb6.js"><link rel="prefetch" href="/assets/js/18.03ddaa95.js"><link rel="prefetch" href="/assets/js/19.021bbcc8.js"><link rel="prefetch" href="/assets/js/20.8aa708b0.js"><link rel="prefetch" href="/assets/js/21.59d7a21e.js"><link rel="prefetch" href="/assets/js/22.21597439.js"><link rel="prefetch" href="/assets/js/23.77303f0b.js"><link rel="prefetch" href="/assets/js/24.0789ed5b.js"><link rel="prefetch" href="/assets/js/25.244a12a8.js"><link rel="prefetch" href="/assets/js/26.a6ee95e4.js"><link rel="prefetch" href="/assets/js/27.9e0f0e9d.js"><link rel="prefetch" href="/assets/js/28.189031c5.js"><link rel="prefetch" href="/assets/js/29.b3100d33.js"><link rel="prefetch" href="/assets/js/3.2a5d4cd5.js"><link rel="prefetch" href="/assets/js/30.fe8fe8c0.js"><link rel="prefetch" href="/assets/js/31.86fec3f7.js"><link rel="prefetch" href="/assets/js/32.24cac061.js"><link rel="prefetch" href="/assets/js/33.f1db2ed0.js"><link rel="prefetch" href="/assets/js/34.c220692f.js"><link rel="prefetch" href="/assets/js/35.9e7b4779.js"><link rel="prefetch" href="/assets/js/36.0cb1d1bc.js"><link rel="prefetch" href="/assets/js/37.7d1fcf79.js"><link rel="prefetch" href="/assets/js/38.bc9bc4b3.js"><link rel="prefetch" href="/assets/js/39.10801a2a.js"><link rel="prefetch" href="/assets/js/4.b4d9a5aa.js"><link rel="prefetch" href="/assets/js/40.c980543d.js"><link rel="prefetch" href="/assets/js/41.3f4581d8.js"><link rel="prefetch" href="/assets/js/42.60b85cdf.js"><link rel="prefetch" href="/assets/js/43.1338528d.js"><link rel="prefetch" href="/assets/js/44.786fc51f.js"><link rel="prefetch" href="/assets/js/45.d65f6744.js"><link rel="prefetch" href="/assets/js/46.543c2b26.js"><link rel="prefetch" href="/assets/js/47.59f19ed2.js"><link rel="prefetch" href="/assets/js/48.60de6b25.js"><link rel="prefetch" href="/assets/js/49.f3df62ef.js"><link rel="prefetch" href="/assets/js/5.013522c1.js"><link rel="prefetch" href="/assets/js/50.fd9871d6.js"><link rel="prefetch" href="/assets/js/51.1fb1863e.js"><link rel="prefetch" href="/assets/js/52.c06ce3f3.js"><link rel="prefetch" href="/assets/js/53.a3d55203.js"><link rel="prefetch" href="/assets/js/54.89ac64bc.js"><link rel="prefetch" href="/assets/js/55.ccf38d1e.js"><link rel="prefetch" href="/assets/js/56.ffb8595b.js"><link rel="prefetch" href="/assets/js/57.5f1bd695.js"><link rel="prefetch" href="/assets/js/58.7463616d.js"><link rel="prefetch" href="/assets/js/59.ea4eb5dd.js"><link rel="prefetch" href="/assets/js/6.72ad7c85.js"><link rel="prefetch" href="/assets/js/60.a2add219.js"><link rel="prefetch" href="/assets/js/61.3eae0362.js"><link rel="prefetch" href="/assets/js/62.801d1658.js"><link rel="prefetch" href="/assets/js/63.b47a17bb.js"><link rel="prefetch" href="/assets/js/64.d5e2bdea.js"><link rel="prefetch" href="/assets/js/65.24d540f4.js"><link rel="prefetch" href="/assets/js/66.09a1ae52.js"><link rel="prefetch" href="/assets/js/67.75bd38e7.js"><link rel="prefetch" href="/assets/js/68.1fe6956e.js"><link rel="prefetch" href="/assets/js/69.d3306c2d.js"><link rel="prefetch" href="/assets/js/7.60760bb7.js"><link rel="prefetch" href="/assets/js/70.95aa4503.js"><link rel="prefetch" href="/assets/js/72.55ae5081.js"><link rel="prefetch" href="/assets/js/73.c7624eee.js"><link rel="prefetch" href="/assets/js/74.63bcc7bd.js"><link rel="prefetch" href="/assets/js/75.e2731e20.js"><link rel="prefetch" href="/assets/js/76.1711af80.js"><link rel="prefetch" href="/assets/js/77.f1c4e2d3.js"><link rel="prefetch" href="/assets/js/78.900bc856.js"><link rel="prefetch" href="/assets/js/79.a1b8c47b.js"><link rel="prefetch" href="/assets/js/8.0c261cf2.js"><link rel="prefetch" href="/assets/js/80.7cf435bf.js"><link rel="prefetch" href="/assets/js/81.fa33b2af.js"><link rel="prefetch" href="/assets/js/82.cdabd386.js"><link rel="prefetch" href="/assets/js/83.879fc50c.js"><link rel="prefetch" href="/assets/js/84.7e460788.js"><link rel="prefetch" href="/assets/js/85.339356d5.js"><link rel="prefetch" href="/assets/js/86.d526418c.js"><link rel="prefetch" href="/assets/js/87.12877e38.js"><link rel="prefetch" href="/assets/js/88.d5a7d193.js"><link rel="prefetch" href="/assets/js/89.2f4a62c2.js"><link rel="prefetch" href="/assets/js/9.50eda380.js"><link rel="prefetch" href="/assets/js/90.6d83f5bf.js"><link rel="prefetch" href="/assets/js/91.f3364825.js"><link rel="prefetch" href="/assets/js/92.158fcc7a.js"><link rel="prefetch" href="/assets/js/93.0c4e5f88.js"><link rel="prefetch" href="/assets/js/94.c5725f80.js"><link rel="prefetch" href="/assets/js/95.dc61d501.js"><link rel="prefetch" href="/assets/js/96.3a598fc5.js"><link rel="prefetch" href="/assets/js/97.712aa8be.js"><link rel="prefetch" href="/assets/js/98.e757fe7a.js"><link rel="prefetch" href="/assets/js/99.1418024a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SUCKED BloG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/other/index.html" class="nav-link">
  index
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  question
</a></div><div class="nav-item"><a href="/audition/index.html" class="nav-link">
  audition
</a></div><div class="nav-item"><a href="/point/index.html" class="nav-link">
  point
</a></div><div class="nav-item"><a href="/work/index.html" class="nav-link">
  work
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="url" class="dropdown-title"><span class="title">url</span> <span class="arrow down"></span></button> <button type="button" aria-label="url" class="mobile-dropdown-title"><span class="title">url</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/config.html" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="https://git.code.tencent.com/u/nampy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯工蜂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/willwxt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nbcb.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/other/index.html" class="nav-link">
  index
</a></div><div class="nav-item"><a href="/question/index.html" class="nav-link">
  question
</a></div><div class="nav-item"><a href="/audition/index.html" class="nav-link">
  audition
</a></div><div class="nav-item"><a href="/point/index.html" class="nav-link">
  point
</a></div><div class="nav-item"><a href="/work/index.html" class="nav-link">
  work
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="url" class="dropdown-title"><span class="title">url</span> <span class="arrow down"></span></button> <button type="button" aria-label="url" class="mobile-dropdown-title"><span class="title">url</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/config.html" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="https://git.code.tencent.com/u/nampy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯工蜂
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/willwxt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nbcb.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航首页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h3> <ol><li>前提知识 : 熟悉Linux命令和相关背景知识 ps top</li></ol> <h4 id="docker简介"><a href="#docker简介" class="header-anchor">#</a> Docker简介</h4> <h5 id="docker的基本组成"><a href="#docker的基本组成" class="header-anchor">#</a> Docker的基本组成</h5> <ol><li>镜像 image - 一个只读的模板, 用于创建Docker容器, 一个模板可以创建很大容器</li> <li>容器 container -
<ul><li>Docker利用容器独立运行应用, 可以启动开始停止删除, 互相隔离, 保证安全</li> <li>简易版的Linux环境</li></ul></li> <li>仓库 repository - 集中存放镜像文件的场所
<ul><li>仓库注册服务器Registry上往往存放着多个仓库</li> <li>仓库分为公开public和私有private</li></ul></li></ol> <ul><li>总结: Docker运行载体/引擎 - images - container - repository</li></ul> <h5 id="安装步骤"><a href="#安装步骤" class="header-anchor">#</a> 安装步骤</h5> <ul><li>安装步骤, 可以参考 <a href="">官网的中文安装手册</a></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> gcc	<span class="token comment"># 安装gcc 和 gcc-c++</span>
yum -y isstall gcc-c++
<span class="token comment"># 卸载旧版本</span>
yum -y remove docker docker-common docker-selinux docker-engine
<span class="token comment"># 安装需要的软件包</span>
yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># 设置stable镜像仓库</span>
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
yum makecache fast	<span class="token comment"># 更新yum软件包索引</span>
yum -y <span class="token function">install</span> docker-ce	<span class="token comment"># 安装DOCKER CE</span>
systemctl start docker	<span class="token comment"># 启动docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>配置镜像加速</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p /etc/docker
<span class="token function">vim</span> /etc/docker/daemon.json
systemctl daemon-reload
systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;https://61hd6hdm.mirror.aliyuncs.com&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>卸载</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl stop docker
yum -y remove docker-ce
<span class="token function">rm</span> -rf /var/lib/docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener noreferrer">阿里云镜像加速<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="docker常用命令"><a href="#docker常用命令" class="header-anchor">#</a> Docker常用命令</h4> <h6 id="帮助命令"><a href="#帮助命令" class="header-anchor">#</a> 帮助命令</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker version
docker info
docker --help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker images	<span class="token comment"># 列出本地主机上的镜像</span>
docker images -a	<span class="token comment"># 流出本地所有的镜像(含中间镜像)</span>
docker images -q	<span class="token comment"># 只显示镜像id</span>
docker images --digests	<span class="token comment"># 摘要信息</span>
docker images --no-trunc	<span class="token comment"># 显示完整的镜像信息</span>

docker search <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>镜像名<span class="token punctuation">]</span>	<span class="token comment"># 镜像库中搜索对应的images</span>
<span class="token comment"># 选项: --no-trunc	-s:列出收藏数不小于指定值	--automated:只列出autobuild类型的镜像</span>
docker pull <span class="token punctuation">[</span>镜像名:TAG<span class="token punctuation">]</span>	<span class="token comment"># 下载镜像</span>

docker rmi <span class="token punctuation">[</span>镜像名/id<span class="token punctuation">]</span>	<span class="token comment">#删除镜像</span>
docker rmi -f <span class="token punctuation">[</span>镜像id<span class="token punctuation">]</span>	<span class="token comment">#删除单个</span>
docker rmi -f <span class="token punctuation">[</span>镜像名1:TAG 镜像名2:TAG <span class="token punctuation">..</span>.<span class="token punctuation">]</span>	<span class="token comment">#批量删除</span>
docker rmi -f <span class="token variable"><span class="token variable">$(</span>docker images -qa<span class="token variable">)</span></span>	<span class="token comment">#删除全部</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h6 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h6> <ul><li>有镜像才能创建容器, 这是根本前提 <code>docker pull centos #用于演示</code></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>镜像<span class="token punctuation">]</span> <span class="token punctuation">[</span>命令<span class="token punctuation">]</span> <span class="token punctuation">[</span>arg<span class="token punctuation">..</span><span class="token punctuation">]</span>	<span class="token comment"># 新建并启动容器</span>
docker run -it centos /bin/bash	<span class="token comment"># 使用镜像centos:latest以交互模式启动容器, 在容器内执行/bin/bash命令</span>
<span class="token comment"># 选项说明: -d 后台运行 -i 以交互模式运行 -t 为容器分配伪输入终端 -P随机端口映射 -p指定端口映射 ip:hostPort:containerPort</span>

docker <span class="token function">ps</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span>	<span class="token comment"># 列出正在运行的容器</span>
<span class="token comment"># 选项说明: -a列出当前所有正在运行+历史上运行过的容器 -l显示最近创建的容器 -n显示最近n个创建的 -q静默模式只显示容器编号 --no-trunc不截断</span>

<span class="token comment"># 退出容器</span>
<span class="token builtin class-name">exit</span>	<span class="token comment"># 容器停止, 退出</span>
ctrl+P+Q	<span class="token comment"># 容器不停止, 退出</span>

<span class="token comment"># 容器状态</span>
docker start <span class="token punctuation">[</span>容器id/容器name<span class="token punctuation">]</span>	<span class="token comment"># 启动容器</span>
docker restart <span class="token punctuation">[</span>容器id/容器name<span class="token punctuation">]</span>	<span class="token comment"># 重启容器</span>
docker stop <span class="token punctuation">[</span>容器id/容器name<span class="token punctuation">]</span>	<span class="token comment"># 停止容器</span>
docker <span class="token function">kill</span> <span class="token punctuation">[</span>容器id/容器name<span class="token punctuation">]</span>	<span class="token comment"># 强制停止容器</span>
docker <span class="token function">rm</span> <span class="token punctuation">[</span>容器id<span class="token punctuation">]</span>	<span class="token comment"># 删除已停止的容器</span>
<span class="token comment"># 批量删除容器</span>
docker <span class="token function">rm</span> -f <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span>
docker <span class="token function">ps</span> -a -q <span class="token operator">|</span> <span class="token function">xargs</span> docker <span class="token function">rm</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h6 id="重要"><a href="#重要" class="header-anchor">#</a> 重要</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run -d centos	<span class="token comment"># 使用镜像centos:latest以后台模式启动一个容器</span>
<span class="token comment"># Docker容器后台运行,就必须有一个前台进程</span>
<span class="token comment"># 最佳的解决方案是,将你要运行的程序以前台进程的形式运行</span>
docker run -d centos /bin/sh -c <span class="token string">&quot;while true;do echo hello zzyy;sleep 2;done&quot;</span>

docker logs -tf --tail <span class="token number">10</span> <span class="token punctuation">[</span>容器id<span class="token punctuation">]</span>	<span class="token comment"># -t加入时间戳 -f实时更新 --tail 数字, 显示最后多少条</span>

docker <span class="token function">top</span> <span class="token punctuation">[</span>容器id<span class="token punctuation">]</span>	<span class="token comment"># 查看容器内运行的细节</span>

docker <span class="token builtin class-name">exec</span> -it <span class="token punctuation">[</span>容器id<span class="token punctuation">]</span> /bin/bash	<span class="token comment"># 打开新的终端</span>
docker attach <span class="token punctuation">[</span>容器id<span class="token punctuation">]</span>	<span class="token comment"># 进入容器启动命令的终端</span>

docker <span class="token function">cp</span> <span class="token punctuation">[</span>容器id:容器内路径<span class="token punctuation">]</span> <span class="token punctuation">[</span>目的主机路径<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="docker镜像"><a href="#docker镜像" class="header-anchor">#</a> Docker镜像</h4> <ul><li>Docker镜像是一层层加载, 每层是一次commit</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker commit	<span class="token comment"># 提交容器副本使之成为一个新的镜像</span>
docker commit -m<span class="token operator">=</span>“提交的描述信息” -a<span class="token operator">=</span>“作者” 容器ID 要创建的目标镜像名:<span class="token punctuation">[</span>标签名<span class="token punctuation">]</span>
<span class="token comment"># 案例</span>
docker run -it -p <span class="token number">8080</span>:8080 tomcat	<span class="token comment"># 下载tomcat镜像到本地并运行</span>
<span class="token comment"># 这里打不开tomcat主页, 复制一下webapps.dist =&gt;&gt; webapps</span>

<span class="token comment"># 提交镜像</span>
docker commit -m<span class="token operator">=</span><span class="token string">&quot;add main&quot;</span> -a<span class="token operator">=</span><span class="token string">&quot;nampy&quot;</span> 6725d914bdb3 nampy/tomcat:1.0
docker images	<span class="token comment"># 查看新镜像</span>
docker run -it -p <span class="token number">8888</span>:8080 nampy/tomcat:1.0	<span class="token comment"># 跑一下新镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="docker容器数据卷"><a href="#docker容器数据卷" class="header-anchor">#</a> Docker容器数据卷</h4> <ul><li>容器持久化, 容器间继承, 共享数据</li></ul> <h6 id="容器内添加数据卷"><a href="#容器内添加数据卷" class="header-anchor">#</a> 容器内添加数据卷</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run -it -v /dataVolume:/containerDataVolume centos /bin/bash
<span class="token comment"># docker run -it -v /宿主机目录:/容器内目录 centos /bin/bash</span>
<span class="token comment"># 可以读写</span>
<span class="token comment"># docker run -it -v /宿主机目录:/容器内目录:ro centos /bin/bash</span>
<span class="token comment"># 此处:ro 只读</span>

docker inspect 容器ID	<span class="token comment"># 查看数据卷是否挂载成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;Mounts&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token property">&quot;Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bind&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home/nampy/app/dataVolume&quot;</span><span class="token punctuation">,</span><span class="token comment">//连接上</span>
    <span class="token property">&quot;Destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/containerDataVolumn&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;RW&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Propagation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rprivate&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>查看是否共享数据</li> <li>容器停止后修改主机内容 , 重启容器查看是否同步</li></ul> <h6 id="dockerfile添加"><a href="#dockerfile添加" class="header-anchor">#</a> DockerFile添加</h6> <p>使用DockerFile文件来添加数据卷</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token comment"># volume test</span>
<span class="token keyword">FROM</span> centos
<span class="token keyword">VOLUME</span> <span class="token punctuation">[</span><span class="token string">&quot;/dataVolumeContainer1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/dataVolumeContainer2&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">CMD</span> echo <span class="token string">&quot;finished,--------success1&quot;</span>
<span class="token keyword">CMD</span> /bin/bash
<span class="token comment"># 用该文件挂载的卷, 默认挂载, 启动后使用 docker inspect id 来查看默认挂载路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用build命令构建镜像</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker build -f /mydocker/dockerFile -t nampy/centos <span class="token builtin class-name">.</span>	<span class="token comment"># 构建</span>
<span class="token comment"># successfully built ...	获得新镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>问题 <code>cannot open directory .: Permission denied</code></li></ul> <h6 id="数据卷容器"><a href="#数据卷容器" class="header-anchor">#</a> 数据卷容器</h6> <p>继承关系</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 先启动dc01</span>
docker run -it --name dc01 nampy/centos	
<span class="token comment"># 此处不加/bin/bash是因为dockerfile中已经有写了</span>
<span class="token comment"># 启动dc02, dc03, 继承dc01 的数据卷</span>
docker run -it --name dc02 --volumes-from dc01 nampy/centos
docker run -it --name dc03 --volumes-from dc01 nampy/centos
<span class="token comment"># 删除dc01, 发现dc02和dc03还是能共享, 新建dc04继承dc03, 都能共享</span>
<span class="token comment"># 总结: 容器之间的数据卷的继承会持续到没有容器使用它为止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>总结: 容器之间的数据卷的继承会持续到没有容器使用它为止</li></ul> <h4 id="dockerfile解析"><a href="#dockerfile解析" class="header-anchor">#</a> DockerFile解析</h4> <h6 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h6> <ul><li>用来构建Docker镜像的构建文件, 由一系列命令和参数构成的脚本</li> <li>步骤: 编写DockerFile - docker build - docker run</li></ul> <h6 id="dockerfile构建过程"><a href="#dockerfile构建过程" class="header-anchor">#</a> DockerFile构建过程</h6> <ul><li>DockerFil内容</li></ul> <ol><li>每条保留字指令都必须为大写, 必须跟随参数</li> <li>指令从上往下顺序执行</li> <li><code># 注释</code></li> <li>每条指令都会创建一个新的镜像层并提交</li></ol> <ul><li>Docker执行DockerFile过程</li></ul> <ol><li>docker从基础镜像运行一个容器</li> <li>执行一条指令并对容器做出修改</li> <li>执行类似docker commit操作, 提交新的镜像层</li> <li>再基于刚提交的镜像运行一个新容器</li> <li>顺序执行知道所有指令都执行完成</li></ol> <h6 id="dockerfile体系结构-保留字指令"><a href="#dockerfile体系结构-保留字指令" class="header-anchor">#</a> DockerFile体系结构(保留字指令)</h6> <table><thead><tr><th>指令</th> <th>说明</th></tr></thead> <tbody><tr><td>FROM</td> <td>基础镜像, 基于哪个镜像</td></tr> <tr><td>MAINTAINER</td> <td>镜像维护者, 姓名, 邮箱地址</td></tr> <tr><td>RUN</td> <td>容器构建时候运行的命令</td></tr> <tr><td>EXPOSE</td> <td>容器对外暴露的端口</td></tr> <tr><td>WORKDIR</td> <td>工作目录, 终端登录的默认文件路径</td></tr> <tr><td>ENV</td> <td>构建镜像过程中设置环境变量</td></tr> <tr><td>ADD</td> <td>将宿主机目录下的文件拷贝进镜像, 自动处理URL,TAR</td></tr> <tr><td>COPY</td> <td>类似ADD, 拷贝目录或文件到镜像</td></tr> <tr><td>VOLUME</td> <td>数据卷</td></tr> <tr><td>CMD</td> <td>指定容器启动时的命令</td></tr> <tr><td>ENTRYPOINT</td> <td>目的和CMD一样, 指定容器启动程序和参数</td></tr> <tr><td>ONBUILD</td> <td>当构建一个被继承的DockerFiler时运行命令</td></tr></tbody></table> <h6 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h6> <ul><li>连接不上8080端口的原因是没有重启docker服务...</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/12/2021, 5:58:39 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.42575a28.js" defer></script><script src="/assets/js/2.0d7d09b8.js" defer></script><script src="/assets/js/71.7065ebf0.js" defer></script>
  </body>
</html>
