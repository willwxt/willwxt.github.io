(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{460:function(t,a,e){"use strict";e.r(a);var s=e(45),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"网络"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络"}},[t._v("#")]),t._v(" 网络")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("腾讯：redis+网络+IO\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"tcp三次握手-tcp四次分手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp三次握手-tcp四次分手"}},[t._v("#")]),t._v(" TCP三次握手, TCP四次分手")]),t._v(" "),e("p",[t._v("建立连接和关闭连接过程, 以及双端状态的转换 "),e("a",{attrs:{href:"https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考博客"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("client : SYN-SENT , ESTABLISHED ; FIN_WAIT_1 , FIN_WAIT_2 , TIME_WAIT , CLOSED\n"),e("ul",[e("li",[t._v("SYN , ACK ;  FIN , ACK ;")])])]),t._v(" "),e("li",[t._v("server: LISTEN , SYN-RECEIVED , ESTABLISH ; CLOSE_WAIT , LAST_ACK , CLOSED\n"),e("ul",[e("li",[t._v("SYN+ACK ; ACK , FIN ;")])])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://image.fundebug.com/2019-03-21-04.png",alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://image.fundebug.com/2019-03-21-06.png",alt:""}})]),t._v(" "),e("p",[t._v("backlog：")]),t._v(" "),e("p",[t._v("cat /proc/sys/net/core/somaxconn   ACCEPT队列  你可以给出backlog 取min")]),t._v(" "),e("p",[t._v("每个人顾好自己，每个人处理好对别人的打扰")]),t._v(" "),e("p",[t._v("cat /proc/sys/net/ipv4/tcp_max_syn_backlog  DDOS")]),t._v(" "),e("p",[t._v("backlog满了 accept队列满了，新客户端直接Connection refused")]),t._v(" "),e("h3",{attrs:{id:"tcp连接状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp连接状态"}},[t._v("#")]),t._v(" TCP连接状态")]),t._v(" "),e("p",[t._v("十一种状态变化")]),t._v(" "),e("h3",{attrs:{id:"connection-refused-报错怎么处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-refused-报错怎么处理"}},[t._v("#")]),t._v(" Connection refused 报错怎么处理")]),t._v(" "),e("h3",{attrs:{id:"osi七层参考模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#osi七层参考模型"}},[t._v("#")]),t._v(" OSI七层参考模型")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://www.jiangmen.gov.cn/zwgk/ztbd/xxaq/xxjs/201909/W020190912412640475614.jpeg",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"什么是长连接和短连接-有状态-无状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是长连接和短连接-有状态-无状态"}},[t._v("#")]),t._v(" 什么是长连接和短连接？有状态，无状态？")]),t._v(" "),e("p",[t._v("TCP是长连接吗？")]),t._v(" "),e("p",[t._v("tcp只是连接，受应用层协议")]),t._v(" "),e("p",[t._v("连接是不是一个“复用”载体")]),t._v(" "),e("p",[t._v("举一个例子：http 1.0 ，1.1 没有开启keepalive保持，连接只负责一次同步阻塞的请求+响应，短连接！")]),t._v(" "),e("p",[t._v("举一个例子：http 1.0,1.1 开启了keepalive保持，同步复用连接：多次(请求+响应)，以上是无状态通信，长连接！")]),t._v(" "),e("p",[t._v("举一个列子：dubbo协议(rpc)，打开连接，同步/异步复用连接：多次（请求+响应）（请求请求）（响应响应），当复用连接的时候，需要消息的ID，而且客户端和服务端同时完成这个约束  有状态通信，长连接！")]),t._v(" "),e("h3",{attrs:{id:"io模型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#io模型"}},[t._v("#")]),t._v(" IO模型")]),t._v(" "),e("p",[t._v("0：IO是程序对着内核的socket-queue的包装")]),t._v(" "),e("p",[t._v("BIO：读取，一直等queue里有才返回，阻塞模型，每连接对应一个线程")]),t._v(" "),e("p",[t._v("NIO：读取，立刻返回：两种结果，读到，没读到，程序逻辑要自己维护，nio noblock")]),t._v(" "),e("p",[t._v("多路复用器：内核增加select，poll，epoll新增的和数据接收，连接接受实质无关的调用，得到是对应socket的事件(listen socket ，socket)，可以有效地去再次accept，R/W")]),t._v(" "),e("p",[t._v("同步阻塞，同步非阻塞")]),t._v(" "),e("p",[t._v("BIO,NIO,多路复用器，在IO模型上都是同步的，都是程序自己accpet，R/W")]),t._v(" "),e("p",[t._v("AIO*")]),t._v(" "),e("h3",{attrs:{id:"粘包-拆包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#粘包-拆包"}},[t._v("#")]),t._v(" 粘包, 拆包")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://v2ex.com/t/747735",target:"_blank",rel:"noopener noreferrer"}},[t._v("大佬讨论"),e("OutboundLink")],1)]),t._v(" "),e("ol",[e("li",[t._v("多个报文可能被合成一个大报文进行传输 (粘包)")]),t._v(" "),e("li",[t._v("可能你的报文太大, 被拆成多个小报文 (拆包)")]),t._v(" "),e("li",[t._v("解决: 指定包size, 应用层协议解决, 比如http")])]),t._v(" "),e("h4",{attrs:{id:"mtu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mtu"}},[t._v("#")]),t._v(" MTU")]),t._v(" "),e("p",[t._v("协议中的最大传输单元,")]),t._v(" "),e("h4",{attrs:{id:"mss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mss"}},[t._v("#")]),t._v(" MSS")]),t._v(" "),e("p",[t._v("TCP建立连接后双方约定的可传输的最大TCP报文长度")]),t._v(" "),e("h3",{attrs:{id:"滑动窗口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#滑动窗口"}},[t._v("#")]),t._v(" 滑动窗口")])])}),[],!1,null,null,null);a.default=r.exports}}]);