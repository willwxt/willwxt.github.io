(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{419:function(a,e,t){"use strict";t.r(e);var r=t(45),v=Object(r.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•"}},[a._v("#")]),a._v(" åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•")]),a._v(" "),t("h4",{attrs:{id:"ğŸğŸğŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸğŸğŸ"}},[a._v("#")]),a._v(" ğŸğŸğŸ")]),a._v(" "),t("h2",{attrs:{id:"capç†è®º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#capç†è®º"}},[a._v("#")]),a._v(" CAPç†è®º")]),a._v(" "),t("p",[a._v("CAP ç†è®ºæŒ‡å‡ºå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿæ¥è¯´, ä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹")]),a._v(" "),t("ol",[t("li",[t("strong",[a._v("ä¸€è‡´æ€§")]),a._v(": åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­, ä¸€è‡´æ€§æ˜¯æŒ‡æ•°æ®åœ¨å¤šä¸ªå‰¯æœ¬ä¹‹é—´æ˜¯å¦èƒ½å¤Ÿä¿æŒä¸€è‡´çš„ç‰¹æ€§, ç­‰åŒäºæ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬ã€‚åœ¨ä¸€è‡´æ€§çš„éœ€æ±‚ä¸‹, å½“ä¸€ä¸ªç³»ç»Ÿåœ¨æ•°æ®ä¸€è‡´çš„çŠ¶æ€ä¸‹æ‰§è¡Œæ›´æ–°æ“ä½œå, åº”è¯¥ä¿è¯ç³»ç»Ÿçš„æ•°æ®ä»ç„¶å¤„äºä¸€è‡´çš„çŠ¶æ€ã€‚")]),a._v(" "),t("li",[t("strong",[a._v("å¯ç”¨æ€§")]),a._v(": æ¯æ¬¡è¯·æ±‚éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„å“åº”, ä½†æ˜¯ä¸ä¸€å®šä¿è¯è·å–çš„æ•°æ®ä¸ºæœ€æ–°æ•°æ®ã€‚")]),a._v(" "),t("li",[t("strong",[a._v("åˆ†åŒºå®¹é”™æ€§")]),a._v(": åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°ä»»ä½•ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™, ä»ç„¶éœ€è¦èƒ½å¤Ÿä¿è¯å¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡, é™¤éæ˜¯æ•´ä¸ªç½‘ç»œç¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœã€‚(åˆ†å¸ƒå¼ç³»ç»Ÿå¾€å¾€éœ€è¦ä¿è¯çš„æ€§è´¨)")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2020/09/cap-theorem-diagram.png",alt:"capç†è®º"}})]),a._v(" "),t("p",[a._v("å„åˆ†å¸ƒå¼ä¸­é—´ä»¶å®ç°: eurakaæ˜¯AP, zookeeperæ˜¯CP")]),a._v(" "),t("h2",{attrs:{id:"base-ç†è®º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#base-ç†è®º"}},[a._v("#")]),a._v(" BASE ç†è®º")]),a._v(" "),t("p",[a._v("ç›¸å¯¹äºACID")]),a._v(" "),t("p",[a._v("BASE æ˜¯ Basically Available(åŸºæœ¬å¯ç”¨)ã€Soft-state(è½¯çŠ¶æ€) å’Œ Eventually Consistent(æœ€ç»ˆä¸€è‡´æ€§) ç¼©å†™ã€‚")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("åŸºæœ¬å¯ç”¨")]),a._v(": åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°æ•…éšœ, å…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ (æœåŠ¡é™çº§ã€é¡µé¢é™çº§) ã€‚")]),a._v(" "),t("li",[t("strong",[a._v("è½¯çŠ¶æ€")]),a._v(": å…è®¸åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°ä¸­é—´çŠ¶æ€, ä¸”ä¸­é—´çŠ¶æ€ä¸å½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚è¿™é‡Œçš„ä¸­é—´çŠ¶æ€æ˜¯æŒ‡ä¸åŒçš„ data replication (æ•°æ®å¤‡ä»½èŠ‚ç‚¹) ä¹‹é—´çš„æ•°æ®æ›´æ–°å¯ä»¥å‡ºç°å»¶æ—¶çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚")]),a._v(" "),t("li",[t("strong",[a._v("æœ€ç»ˆä¸€è‡´æ€§")]),a._v(": data replications ç»è¿‡ä¸€æ®µæ—¶é—´è¾¾åˆ°ä¸€è‡´æ€§(é€šå¸¸ç»è¿‡æ¶ˆæ¯ä¼ é€’)")])]),a._v(" "),t("h2",{attrs:{id:"å…±è¯†ç®—æ³•-ä¸€è‡´æ€§åè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…±è¯†ç®—æ³•-ä¸€è‡´æ€§åè®®"}},[a._v("#")]),a._v(" å…±è¯†ç®—æ³•/ä¸€è‡´æ€§åè®®")]),a._v(" "),t("p",[a._v("æ¦‚è¿°: è¾¾æˆå…±è¯†çš„æœºåˆ¶, åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­, å¯ä»¥åˆ†ä¸º")]),a._v(" "),t("ul",[t("li",[a._v("å´©æºƒå®¹é”™åè®®crash fault tolerant,CFT")]),a._v(" "),t("li",[a._v("æ‹œå åº­å®¹é”™åè®®Byzantine fault tolerant,BFT")])]),a._v(" "),t("h3",{attrs:{id:"paxos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#paxos"}},[a._v("#")]),a._v(" Paxos")]),a._v(" "),t("p",[a._v("åŸºäºæ¶ˆæ¯ä¼ é€’, å…±è¯†ç®—æ³•")]),a._v(" "),t("p",[t("strong",[a._v("æˆå‘˜åˆ—è¡¨")]),a._v(":  "),t("font",{attrs:{color:"ff5500"}},[a._v("Proposeræè®®è€… , Acceptoræ¥å—è€… , Learnerå­¦ä¹ è€…")]),a._v(" æ¯ä¸ªèŠ‚ç‚¹èº«å…¼æ•°èŒ")],1),a._v(" "),t("ol",[t("li",[a._v("Proposer å‘èµ·ææ¡ˆ")]),a._v(" "),t("li",[a._v("Acceptor æ”¶åˆ°ææ¡ˆåå¯ä»¥æ¥æ”¶ææ¡ˆ")]),a._v(" "),t("li",[a._v("Learner ä¸å‚ä¸å†³ç­–, åªå­¦ä¹ ææ¡ˆ")])]),a._v(" "),t("h4",{attrs:{id:"ç®—æ³•æµç¨‹-å†³è®®çš„æå‡ºä¸æ‰¹å‡†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®—æ³•æµç¨‹-å†³è®®çš„æå‡ºä¸æ‰¹å‡†"}},[a._v("#")]),a._v(" ç®—æ³•æµç¨‹: å†³è®®çš„æå‡ºä¸æ‰¹å‡†")]),a._v(" "),t("ol",[t("li",[a._v("prepareé˜¶æ®µ:\n"),t("ol",[t("li",[a._v("proposerå°†å‘é€prepareè¯·æ±‚å‘é€ç»™å¤§å¤šæ•°Acceptor, è¿™é‡Œå‡è®¾ææ¡ˆidä¸ºn\n"),t("ul",[t("li",[a._v("è¿™é‡Œä¼šæºå¸¦ææ¡ˆid, æ— éœ€æºå¸¦å†…å®¹")])])]),a._v(" "),t("li",[a._v("Acceptoræ”¶åˆ°æ¶ˆæ¯å, è¿›è¡Œpromiseæ‰¿è¯ºå›å¤\n"),t("ul",[t("li",[a._v("ä¸å†æ¥å—æ›´å¤šidå°äºç­‰äºæœ¬æ¬¡è¯·æ±‚çš„ prepare è¯·æ±‚")]),a._v(" "),t("li",[a._v("ä¸åœ¨æ¥æ”¶idå°äºæœ¬æ¬¡è¯·æ±‚çš„ accept è¯·æ±‚")]),a._v(" "),t("li",[a._v("å›å¤æ”¶åˆ°è¿‡çš„æœ€å¤§idææ¡ˆ")])])])])]),a._v(" "),t("li",[a._v("Accepté˜¶æ®µ\n"),t("ol",[t("li",[a._v("å½“proposeræ”¶åˆ°å¤šæ•°å›å¤å, å‘Acceptorå‘é€ accept è¯·æ±‚\n"),t("ul",[t("li",[a._v("æ”¶åˆ°çš„å›å¤å¸¦æœ‰id, é€‰æ‹©å…¶ä¸­idæœ€å¤§è€…, åˆ¤æ–­æ˜¯å¦å¸¦æœ‰value, æœ‰å°±ä½¿ç”¨æ­¤value, å¦åˆ™å¯ä»¥ç”¨è‡ªå·±çš„value")])])]),a._v(" "),t("li",[a._v("Acceptoræ”¶åˆ°è¯·æ±‚, è¿›è¡Œacceptå¤„ç† (æ¥æ”¶å¹¶æŒä¹…åŒ–idå’Œvalue)")])])]),a._v(" "),t("li",[a._v("Learnerå­¦ä¹ é˜¶æ®µ: proposeræ”¶åˆ°å¤šæ•°acceptå›å¤, å½¢æˆå†³è®®, å¹¶å‘é€ç»™æ‰€æœ‰learner")])]),a._v(" "),t("h4",{attrs:{id:"é—®é¢˜-paxosç®—æ³•å¯èƒ½å½¢æˆæ´»é”è€Œæ°¸è¿œä¸ä¼šç»“æŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜-paxosç®—æ³•å¯èƒ½å½¢æˆæ´»é”è€Œæ°¸è¿œä¸ä¼šç»“æŸ"}},[a._v("#")]),a._v(" é—®é¢˜: Paxosç®—æ³•å¯èƒ½å½¢æˆæ´»é”è€Œæ°¸è¿œä¸ä¼šç»“æŸ")]),a._v(" "),t("p",[a._v("ä¸¤ä¸ªProposersäº¤æ›¿PrepareæˆåŠŸ, è€ŒAcceptå¤±è´¥, å½¢æˆæ´»é” Livelock")]),a._v(" "),t("h3",{attrs:{id:"multi-paxosç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multi-paxosç®—æ³•"}},[a._v("#")]),a._v(" Multi-Paxosç®—æ³•")]),a._v(" "),t("p",[a._v("Basic Paxosç½‘ç»œè¯·æ±‚è¾ƒå¤š, æç«¯æƒ…å†µä¸‹å¯èƒ½å½¢æˆæ´»é”, Multi-Paxos å¯¹æ­¤è¿›è¡Œä¸¤ç‚¹æ”¹è¿›:")]),a._v(" "),t("ol",[t("li",[a._v("é’ˆå¯¹æ¯ä¸€ä¸ªè¦ç¡®å®šçš„å€¼, è¿è¡Œä¸€æ¬¡Paxosç®—æ³•å®ä¾‹ Instance, å½¢æˆå†³è®®; æ¯æ¬¡éƒ½æœ‰å”¯ä¸€çš„Instance idæ ‡è¯†")]),a._v(" "),t("li",[t("font",{attrs:{color:"ff5500"}},[a._v("åœ¨Proposersä¸­é€‰ä¸¾ä¸€ä¸ªLeader")]),a._v(" , ç”±Leaderå”¯ä¸€åœ°æäº¤Proposalç»™Acceptorsè¿›è¡Œè¡¨å†³;\n"),t("ol",[t("li",[a._v("è¿™æ ·"),t("font",{attrs:{color:"ff5500"}},[a._v("æ²¡æœ‰Proposerç«äº‰, è§£å†³äº†æ´»é”é—®é¢˜")]),a._v(" ;")],1),a._v(" "),t("li",[a._v("åœ¨ä»…æœ‰ä¸€ä¸ªLeaderè¿›è¡ŒValueæäº¤çš„æƒ…å†µä¸‹, "),t("font",{attrs:{color:"ff5500"}},[a._v("Prepareé˜¶æ®µå°±å¯ä»¥è·³è¿‡")]),a._v(" , ä¸¤é˜¶æ®µå˜ä¸ºä¸€é˜¶æ®µ, "),t("font",{attrs:{color:"ff5500"}},[a._v("æé«˜æ•ˆç‡")])],1)])],1)]),a._v(" "),t("ul",[t("li",[a._v("Leaderé€‰ä¸¾: leaderçš„ç¡®å®šä¹Ÿæ˜¯ä¸€æ¬¡å†³è®®çš„å½¢æˆ, å¯ä»¥æ‰§è¡Œä¸€æ¬¡Basic Paxosé€‰ä¸¾leader")]),a._v(" "),t("li",[a._v("æ”¹å˜prepareä½œç”¨èŒƒå›´: leaderåªéœ€æ‰§è¡Œä¸€æ¬¡prepare, åç»­åªéœ€è¦æ‰§è¡Œaccept")])]),a._v(" "),t("h3",{attrs:{id:"zab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zab"}},[a._v("#")]),a._v(" ZAB")]),a._v(" "),t("p",[a._v("ä¸“é—¨ä¸ºzookeeperè®¾è®¡çš„ä¸€ç§ (æ”¯æŒå¥”æºƒæ¢å¤çš„) åŸå­å¹¿æ’­åè®® "),t("a",{attrs:{href:"https://houbb.github.io/2018/10/30/zab",target:"_blank",rel:"noopener noreferrer"}},[a._v("å‚è€ƒåšå®¢-ZAB"),t("OutboundLink")],1)]),a._v(" "),t("h4",{attrs:{id:"è¯·æ±‚æäº¤è¿‡ç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯·æ±‚æäº¤è¿‡ç¨‹"}},[a._v("#")]),a._v(" è¯·æ±‚æäº¤è¿‡ç¨‹")]),a._v(" "),t("ol",[t("li",[a._v("å®¢æˆ·ç«¯å‘leaderå‘èµ·å†™è¯·æ±‚")]),a._v(" "),t("li",[a._v("leaderå‘èµ·äº‹åŠ¡ææ¡ˆ, å¹¿æ’­ç»™æ‰€æœ‰follower")]),a._v(" "),t("li",[a._v("followerå†™å…¥äº‹åŠ¡æ—¥å¿—, åé¦ˆack")]),a._v(" "),t("li",[a._v("leaderæ”¶åˆ°å¤šæ•°ack, è§†ä¸ºå·²æäº¤, å›å¤å®¢æˆ·ç«¯")]),a._v(" "),t("li",[a._v("å‘èµ·commitæ¶ˆæ¯, å¹¿æ’­ç»™æ‰€æœ‰follower, followeræ”¶åˆ°åè¿›è¡ŒçœŸæ­£æäº¤")])]),a._v(" "),t("h4",{attrs:{id:"è¿‡ç¨‹ä¿è¯-å¥”æºƒæ¢å¤è¦æ±‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿‡ç¨‹ä¿è¯-å¥”æºƒæ¢å¤è¦æ±‚"}},[a._v("#")]),a._v(" è¿‡ç¨‹ä¿è¯ / å¥”æºƒæ¢å¤è¦æ±‚")]),a._v(" "),t("ol",[t("li",[a._v("leaderå·²æäº¤çš„äº‹åŠ¡, å¿…é¡»æœ€ç»ˆåœ¨æ‰€æœ‰çš„followeræäº¤\n"),t("ul",[t("li",[a._v("leaderå·²æäº¤äº‹åŠ¡, è¯´æ˜å¤§å¤šæ•°followeræœ‰äº‹åŠ¡æ—¥å¿—, æ–°leaderå¯¹æœªæäº¤äº‹åŠ¡è¿›è¡Œå¤§å¤šæ•°æŠ•ç¥¨")])])]),a._v(" "),t("li",[a._v("ä¸¢å¼ƒè¢«leaderæå‡º, ä½†æ²¡æœ‰è¢«æäº¤çš„äº‹åŠ¡\n"),t("ul",[t("li",[a._v("äº‹åŠ¡idä¸­çš„é«˜32ä½ä»£è¡¨epochçºªå…ƒ, epochæ˜¯é€’å¢çš„, æ—§leaderä¼šä¸¢å¼ƒæœªè¢«æäº¤çš„äº‹åŠ¡")])])])]),a._v(" "),t("h4",{attrs:{id:"å´©æºƒæ¢å¤æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å´©æºƒæ¢å¤æ¨¡å¼"}},[a._v("#")]),a._v(" å´©æºƒæ¢å¤æ¨¡å¼")]),a._v(" "),t("ol",[t("li",[a._v("é›†ç¾¤å¯åŠ¨è¿‡ç¨‹ä¸­, æˆ–è€…LeaderæœåŠ¡å™¨å¼‚å¸¸, ç½‘ç»œä¸­æ–­, ä¼šè¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ (æ­¤æ—¶æœåŠ¡ä¸å¯ç”¨) ;")]),a._v(" "),t("li",[a._v("è¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼å, é›†ç¾¤é€‰ä¸¾äº§ç”Ÿæ–°çš„leader;\n"),t("ol",[t("li",[a._v("é€‰ä¸¾æ¡ä»¶: æ–°leaderä¸èƒ½åŒ…å«æœªæäº¤çš„äº‹åŠ¡ææ¡ˆ")]),a._v(" "),t("li",[a._v("æ–°leaderèŠ‚ç‚¹ä¸­å«æœ‰æœ€å¤§çš„äº‹åŠ¡id")])])]),a._v(" "),t("li",[a._v("leaderä¸followerè¿›è¡Œæ•°æ®åŒæ­¥")]),a._v(" "),t("li",[a._v("è¿‡åŠçš„èŠ‚ç‚¹å®Œæˆæ•°æ®åŒæ­¥ä¹‹å, é€€å‡ºå´©æºƒæ¢å¤æ¨¡å¼, è¿›å…¥æ¶ˆæ¯å¹¿æ’­æ¨¡å¼;")]),a._v(" "),t("li",[a._v("æ­¤å¤–, æ–°çš„èŠ‚ç‚¹åŠ å…¥é›†ç¾¤, è¯¥èŠ‚ç‚¹è‡ªåŠ¨è¿›å…¥æ¢å¤æ¨¡å¼, å®Œæˆæ•°æ®åŒæ­¥åå†æä¾›æœåŠ¡")])]),a._v(" "),t("h3",{attrs:{id:"raft"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raft"}},[a._v("#")]),a._v(" Raft")]),a._v(" "),t("p",[a._v("Raftæ˜¯ä¸€ç§ç”¨äºæ›¿ä»£"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Paxos",target:"_blank",rel:"noopener noreferrer"}},[a._v("Paxos"),t("OutboundLink")],1),a._v("çš„"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%85%B1%E8%AD%98%E6%A9%9F%E5%88%B6",target:"_blank",rel:"noopener noreferrer"}},[a._v("å…±è¯†"),t("OutboundLink")],1),a._v("ç®—æ³•ã€‚")]),a._v(" "),t("p",[a._v('åå­—æ¥æºäº"Reliable, Replicated, Redundant, And Fault-Tolerant" (å¯é ã€å¯å¤åˆ¶ã€å¯å†—ä½™ã€å¯å®¹é”™) çš„ç¼©å†™')]),a._v(" "),t("ul",[t("li",[a._v("æ¯”èµ·Paxos, ç®—æ³•æœ¬èº«èƒ½è¢«æ›´å¥½åœ°ç†è§£, å®‰å…¨æ€§æ›´é«˜, æä¾›ä¸€äº›é¢å¤–çš„ç‰¹æ€§")]),a._v(" "),t("li",[a._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´éƒ¨ç½²æœ‰é™çŠ¶æ€æœº, å¹¶æä¾›é€šç”¨æ–¹æ³•, ä»¥æ­¤æ¥ç¡®ä¿ä»»æ„èŠ‚ç‚¹åœ¨æŸç§çŠ¶æ€è½¬æ¢ä¸Šä¿æŒä¸€è‡´")]),a._v(" "),t("li",[a._v("é›†ç¾¤å†…çš„èŠ‚ç‚¹éƒ½å¯¹é€‰ä¸¾å‡ºçš„é¢†è¢–é‡‡å–ä¿¡ä»»")])]),a._v(" "),t("p",[a._v("å¯è§†åŒ–æ¼”ç¤º: http://thesecretlivesofdata.com/raft/")]),a._v(" "),t("h4",{attrs:{id:"ç®—æ³•å®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®—æ³•å®ç°"}},[a._v("#")]),a._v(" ç®—æ³•å®ç°")]),a._v(" "),t("p",[a._v("Rafté›†ç¾¤ä¸­æœ‰ä¸‰ç§èº«ä»½, èŠ‚ç‚¹æœ‰æœºä¼šåœ¨è¿™äº›èº«ä»½ä¹‹é—´åˆ‡æ¢:")]),a._v(" "),t("ol",[t("li",[a._v("leader é¢†è¢–")]),a._v(" "),t("li",[a._v("follower è¿½éšè€…")]),a._v(" "),t("li",[a._v("candidate å€™é€‰äºº")]),a._v(" "),t("li",[a._v("æ­£å¸¸æƒ…å†µåªä¼šæœ‰ä¸€ä¸ªleader, å…¶ä»–éƒ½æ˜¯follower")]),a._v(" "),t("li",[a._v("leaderè´Ÿè´£æ‰€æœ‰å¤–éƒ¨è¯·æ±‚, å¦‚ä¸€è¯·æ±‚ä¸æ˜¯leaderæ”¶åˆ°, ä¼šè¢«ä¼ å¯¼ç»™leader")]),a._v(" "),t("li",[a._v("leaderå‘é€å¿ƒè·³, è®©followerçŸ¥é“leaderçŠ¶æ€")]),a._v(" "),t("li",[a._v("followerè®¾è®¡è¶…æ—¶æœºåˆ¶, è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰æ”¶åˆ°å¿ƒè·³, å°±ä¼šè¿›å…¥é€‰ä¸¾çŠ¶æ€")])]),a._v(" "),t("p",[a._v("Raftå°†é—®é¢˜æ‹†æˆæ•°ä¸ªå­é—®é¢˜åˆ†å¼€è§£å†³")]),a._v(" "),t("ol",[t("li",[a._v("é¢†è¢–é€‰ä¸¾ Leader Election : å¦‚ä½•é€‰ä¸¾leader")]),a._v(" "),t("li",[a._v("è®°å½•å¤å†™ Log Replication : å¦‚ä½•ä¿è¯æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§")]),a._v(" "),t("li",[a._v("å®‰å…¨æ€§ Safety")])]),a._v(" "),t("h4",{attrs:{id:"é¢†è¢–é€‰ä¸¾-leader-election"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é¢†è¢–é€‰ä¸¾-leader-election"}},[a._v("#")]),a._v(" é¢†è¢–é€‰ä¸¾ Leader Election")]),a._v(" "),t("p",[a._v("æ¦‚è¿°: ç®€å•ç‰ˆæœ¬")]),a._v(" "),t("ol",[t("li",[a._v("followerå¿ƒè·³è¶…æ—¶åˆ™å‡çº§ä¸ºcandidate, å‘å…¶ä»–èŠ‚ç‚¹å‘é€æ‹‰ç¥¨è¯·æ±‚")]),a._v(" "),t("li",[a._v("å…¶ä»–èŠ‚ç‚¹åªè¦æ”¶åˆ°è¯·æ±‚å°±åŒæ„æŠ•ç¥¨, è¿‡åŠèŠ‚ç‚¹åŒæ„, candidateç›´æ¥å½“é€‰æ–°leader")])]),a._v(" "),t("p",[a._v("ç»†èŠ‚:")]),a._v(" "),t("ol",[t("li",[t("strong",[a._v("ä»»æœŸterm")]),a._v(":")])]),a._v(" "),t("ul",[t("li",[a._v("æ¯æ¬¡æœ‰candidateè¯ç”Ÿéƒ½ä¼šå¼€å¯æ–°ä¸€è½®ä»»æœŸé€‰ä¸¾term election")]),a._v(" "),t("li",[a._v("candidateä¼šå…ˆç»™è‡ªå·±æŠ•ä¸€ç¥¨")]),a._v(" "),t("li",[a._v("åŒä¸ªä»»æœŸé€‰ä¸¾ä¸­ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æŠ•1ç¥¨, å¾€å¾€æŠ•ç»™è¯¥ä»»æœŸçš„é¦–ä¸ªæ‹‰ç¥¨è¯·æ±‚")]),a._v(" "),t("li",[a._v("å€™é€‰äººæ”¶åˆ°å…¶ä»–å€™é€‰äººçš„æ‹‰ç¥¨, æ‹‰ç¥¨ä»»æœŸä¸å°äºè‡ªå·±çš„ä»»æœŸ, è‡ªå·±ä¼šæ”¾å¼ƒç«é€‰, å¹¶åç»™å¯¹æ–¹æŠ•ç¥¨")]),a._v(" "),t("li",[a._v("å¦‚æœè¶…æ—¶åè¿˜æœªé€‰å‡ºæ–°é¢†è¢–, æ­¤ä»»æœŸç»ˆæ­¢, å¼€å§‹æ–°ä»»æœŸ")])]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("election timeout: followerå¤šä¹…å‡çº§ä¸ºcandidate (åŒºé—´å†…çš„éšæœºå€¼)\n"),t("ol",[t("li",[a._v("åªè¦æ”¶åˆ°æ‹‰ç¥¨ / å¿ƒè·³, éƒ½ä¼šåˆ·æ–°è¿™ä¸ªè¶…æ—¶(è‡ªæ—‹)")])])]),a._v(" "),t("li",[a._v("ä»»æœŸé€‰ä¸¾å†·å´: æœ¬è½®ä»»æœŸé€‰ä¸¾ä¸­, å¤šä¸ªå€™é€‰è€…å¹³ç¥¨, è¿™äº›å€™é€‰è€…éœ€è¦ç»è¿‡è¿™ä¸ªè‡ªæ—‹åæ‰èƒ½ç»§ç»­ä¸‹ä¸€è½®ä»»æœŸé€‰ä¸¾")]),a._v(" "),t("li",[a._v("Raftæ¯ä¸ªæœåŠ¡å™¨çš„è¶…æ—¶æœŸé™æ˜¯éšæœºçš„, é™ä½åŒæ—¶ç«é€‰çš„æ¦‚ç‡")])]),a._v(" "),t("h4",{attrs:{id:"è®°å½•å¤å†™-log-replication"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®°å½•å¤å†™-log-replication"}},[a._v("#")]),a._v(" è®°å½•å¤å†™ Log Replication")]),a._v(" "),t("p",[a._v("æ›´æ–°æ•°æ®çš„è´£ä»»åœ¨leaderä¸Š")]),a._v(" "),t("p",[a._v("ç®€è¦æµç¨‹:")]),a._v(" "),t("ol",[t("li",[a._v("leaderæ¥æ”¶åˆ°æ•°æ®æŒ‡ä»¤, å¹¶åšè®°å½•, ç„¶åå‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ä¿¡æ¯")]),a._v(" "),t("li",[a._v("èŠ‚ç‚¹æ”¶åˆ°åä¹Ÿå°†æ•°æ®åšè®°å½•, å¹¶è¿”å›ç¡®è®¤")]),a._v(" "),t("li",[a._v("leaderæ”¶åˆ°è¿‡åŠç¡®è®¤å, æ‰çœŸæ­£å°†æ•°æ®ä¿®æ”¹, ç»™å®¢æˆ·ç«¯å“åº”æ“ä½œæˆåŠŸ")]),a._v(" "),t("li",[a._v("leaderå‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ç¡®è®¤ä¿®æ”¹ä¿¡æ¯")])]),a._v(" "),t("p",[a._v("ç»†èŠ‚:")]),a._v(" "),t("ol",[t("li",[a._v("å…¶å®è¿™äº›ä¿¡æ¯æ˜¯éšç€å¿ƒè·³ä¸€èµ·å‘é€çš„")])]),a._v(" "),t("h4",{attrs:{id:"åˆ†åŒºå®¹é”™æ€§-partition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºå®¹é”™æ€§-partition"}},[a._v("#")]),a._v(" åˆ†åŒºå®¹é”™æ€§ partition")]),a._v(" "),t("p",[a._v("å¦‚æœå‡ºç°äº†ç½‘ç»œåˆ†åŒºé—®é¢˜, å¯èƒ½ä¼šå½¢æˆå¤šä¸ªleaderé›†ç¾¤:")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("æ­¤å‡è®¾æƒ…å¢ƒä¸‹, æ—§leader(D)å’Œæ–°leader(B)å¯ä»¥å…±å­˜, ä½†æ–°leaderçš„termæ›´é«˜\n\t\tA\nB(L)\t\t\tC\n================== ç½‘ç»œä¸­æ–­\n \tD(L)\tE\næ­¤æ—¶, å¦‚æœBé›†ç¾¤æ”¶åˆ°è¯·æ±‚, å¦‚æœACæ­£å¸¸, æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„(æ”¶åˆ°äº†è¶³å¤Ÿå¤šçš„è¿”å›ç¡®è®¤)\nå¦‚æœDé›†ç¾¤æ”¶åˆ°è¯·æ±‚, å› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„èŠ‚ç‚¹è¿”å›ç¡®è®¤ä¿¡æ¯, æ‰€ä»¥æ˜¯ä¸å¯ç”¨çš„\n### è‡³æ­¤é¿å…äº†è„‘è£‚é—®é¢˜\nå…¶æ¬¡, å½“ç½‘ç»œåˆ†åŒºé—®é¢˜ä¿®å¤å, å°±ä¼šä»¥termæ›´é«˜çš„ä½œä¸ºleader, å¹¶å¯¹æ•°æ®è¿›è¡ŒåŒæ­¥\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h3",{attrs:{id:"gossipåè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gossipåè®®"}},[a._v("#")]),a._v(" Gossipåè®®")]),a._v(" "),t("p",[a._v("ä¸€ä¸ªèŠ‚ç‚¹æƒ³è¦åˆ†äº«ä¸€äº›ä¿¡æ¯ç»™ç½‘ç»œä¸­çš„å…¶ä»–çš„ä¸€äº›èŠ‚ç‚¹ã€‚äºæ˜¯, å®ƒ"),t("strong",[a._v("å‘¨æœŸæ€§")]),a._v("çš„"),t("strong",[a._v("éšæœº")]),a._v("é€‰æ‹©ä¸€äº›èŠ‚ç‚¹, å¹¶æŠŠä¿¡æ¯ä¼ é€’ç»™è¿™äº›èŠ‚ç‚¹ã€‚è¿™äº›æ”¶åˆ°ä¿¡æ¯çš„èŠ‚ç‚¹æ¥ä¸‹æ¥ä¼šåšåŒæ ·çš„äº‹æƒ…, å³æŠŠè¿™äº›ä¿¡æ¯ä¼ é€’ç»™å…¶ä»–ä¸€äº›éšæœºé€‰æ‹©çš„èŠ‚ç‚¹")]),a._v(" "),t("ul",[t("li",[a._v("æ— leader")]),a._v(" "),t("li",[a._v("ä¸æ”¯æŒæ‹œå åº­é—®é¢˜")])]),a._v(" "),t("p",[t("a",{attrs:{href:"https://tech.meituan.com/2017/04/21/mt-leaf.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("ç¾å›¢åˆ†å¸ƒå¼id leaf"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"akfæ‹†åˆ†åŸåˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#akfæ‹†åˆ†åŸåˆ™"}},[a._v("#")]),a._v(" AKFæ‹†åˆ†åŸåˆ™")]),a._v(" "),t("ul",[t("li",[a._v("xè½´:å…¨é‡é•œåƒ,è¯»å†™åˆ†ç¦»")]),a._v(" "),t("li",[a._v("yè½´:æ ¹æ®ä¸šåŠ¡/åŠŸèƒ½æ‹†åˆ†,æ•°æ®åˆ†å¼€å­˜å‚¨")]),a._v(" "),t("li",[a._v("zè½´:åŸºäºè§„åˆ™æ‹†åˆ†/é€»è¾‘æ‹†åˆ†")])])])}),[],!1,null,null,null);e.default=v.exports}}]);