(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{456:function(a,t,e){"use strict";e.r(t);var r=e(45),v=Object(r.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•"}},[a._v("#")]),a._v(" åˆ†å¸ƒå¼ç›¸å…³å¤‡å¿˜å½•")]),a._v(" "),e("h4",{attrs:{id:"ğŸğŸğŸ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸğŸğŸ"}},[a._v("#")]),a._v(" ğŸğŸğŸ")]),a._v(" "),e("h2",{attrs:{id:"capç†è®º"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#capç†è®º"}},[a._v("#")]),a._v(" CAPç†è®º")]),a._v(" "),e("p",[a._v("CAP ç†è®ºæŒ‡å‡ºå¯¹äºä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿæ¥è¯´, ä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹")]),a._v(" "),e("ol",[e("li",[e("strong",[a._v("ä¸€è‡´æ€§")]),a._v(": åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­, ä¸€è‡´æ€§æ˜¯æŒ‡æ•°æ®åœ¨å¤šä¸ªå‰¯æœ¬ä¹‹é—´æ˜¯å¦èƒ½å¤Ÿä¿æŒä¸€è‡´çš„ç‰¹æ€§, ç­‰åŒäºæ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬ã€‚åœ¨ä¸€è‡´æ€§çš„éœ€æ±‚ä¸‹, å½“ä¸€ä¸ªç³»ç»Ÿåœ¨æ•°æ®ä¸€è‡´çš„çŠ¶æ€ä¸‹æ‰§è¡Œæ›´æ–°æ“ä½œå, åº”è¯¥ä¿è¯ç³»ç»Ÿçš„æ•°æ®ä»ç„¶å¤„äºä¸€è‡´çš„çŠ¶æ€ã€‚")]),a._v(" "),e("li",[e("strong",[a._v("å¯ç”¨æ€§")]),a._v(": æ¯æ¬¡è¯·æ±‚éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„å“åº”, ä½†æ˜¯ä¸ä¸€å®šä¿è¯è·å–çš„æ•°æ®ä¸ºæœ€æ–°æ•°æ®ã€‚")]),a._v(" "),e("li",[e("strong",[a._v("åˆ†åŒºå®¹é”™æ€§")]),a._v(": åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°ä»»ä½•ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™, ä»ç„¶éœ€è¦èƒ½å¤Ÿä¿è¯å¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡, é™¤éæ˜¯æ•´ä¸ªç½‘ç»œç¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœã€‚(åˆ†å¸ƒå¼ç³»ç»Ÿå¾€å¾€éœ€è¦ä¿è¯çš„æ€§è´¨)")])]),a._v(" "),e("p",[e("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2020/09/cap-theorem-diagram.png",alt:"capç†è®º"}})]),a._v(" "),e("p",[a._v("å„åˆ†å¸ƒå¼ä¸­é—´ä»¶å®ç°: eurakaæ˜¯AP, zookeeperæ˜¯CP")]),a._v(" "),e("h2",{attrs:{id:"base-ç†è®º"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#base-ç†è®º"}},[a._v("#")]),a._v(" BASE ç†è®º")]),a._v(" "),e("p",[a._v("ç›¸å¯¹äºACID")]),a._v(" "),e("p",[a._v("BASE æ˜¯ Basically Available(åŸºæœ¬å¯ç”¨)ã€Soft-state(è½¯çŠ¶æ€) å’Œ Eventually Consistent(æœ€ç»ˆä¸€è‡´æ€§) ç¼©å†™ã€‚")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("åŸºæœ¬å¯ç”¨")]),a._v(": åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°æ•…éšœ, å…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ (æœåŠ¡é™çº§ã€é¡µé¢é™çº§) ã€‚")]),a._v(" "),e("li",[e("strong",[a._v("è½¯çŠ¶æ€")]),a._v(": å…è®¸åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°ä¸­é—´çŠ¶æ€, ä¸”ä¸­é—´çŠ¶æ€ä¸å½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚è¿™é‡Œçš„ä¸­é—´çŠ¶æ€æ˜¯æŒ‡ä¸åŒçš„ data replication (æ•°æ®å¤‡ä»½èŠ‚ç‚¹) ä¹‹é—´çš„æ•°æ®æ›´æ–°å¯ä»¥å‡ºç°å»¶æ—¶çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚")]),a._v(" "),e("li",[e("strong",[a._v("æœ€ç»ˆä¸€è‡´æ€§")]),a._v(": data replications ç»è¿‡ä¸€æ®µæ—¶é—´è¾¾åˆ°ä¸€è‡´æ€§(é€šå¸¸ç»è¿‡æ¶ˆæ¯ä¼ é€’)")])]),a._v(" "),e("h2",{attrs:{id:"å…±è¯†ç®—æ³•-ä¸€è‡´æ€§åè®®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å…±è¯†ç®—æ³•-ä¸€è‡´æ€§åè®®"}},[a._v("#")]),a._v(" å…±è¯†ç®—æ³•/ä¸€è‡´æ€§åè®®")]),a._v(" "),e("p",[a._v("æ¦‚è¿°: è¾¾æˆå…±è¯†çš„æœºåˆ¶, åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­, å¯ä»¥åˆ†ä¸º")]),a._v(" "),e("ul",[e("li",[a._v("å´©æºƒå®¹é”™åè®®crash fault tolerant,CFT")]),a._v(" "),e("li",[a._v("æ‹œå åº­å®¹é”™åè®®Byzantine fault tolerant,BFT")])]),a._v(" "),e("h3",{attrs:{id:"paxos"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#paxos"}},[a._v("#")]),a._v(" Paxos")]),a._v(" "),e("h3",{attrs:{id:"zab"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zab"}},[a._v("#")]),a._v(" ZAB")]),a._v(" "),e("h3",{attrs:{id:"raft"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#raft"}},[a._v("#")]),a._v(" Raft")]),a._v(" "),e("p",[a._v("Raftæ˜¯ä¸€ç§ç”¨äºæ›¿ä»£"),e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Paxos",target:"_blank",rel:"noopener noreferrer"}},[a._v("Paxos"),e("OutboundLink")],1),a._v("çš„"),e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%85%B1%E8%AD%98%E6%A9%9F%E5%88%B6",target:"_blank",rel:"noopener noreferrer"}},[a._v("å…±è¯†"),e("OutboundLink")],1),a._v("ç®—æ³•ã€‚")]),a._v(" "),e("p",[a._v('åå­—æ¥æºäº"Reliable, Replicated, Redundant, And Fault-Tolerant" (å¯é ã€å¯å¤åˆ¶ã€å¯å†—ä½™ã€å¯å®¹é”™) çš„ç¼©å†™')]),a._v(" "),e("ul",[e("li",[a._v("æ¯”èµ·Paxos, ç®—æ³•æœ¬èº«èƒ½è¢«æ›´å¥½åœ°ç†è§£, å®‰å…¨æ€§æ›´é«˜, æä¾›ä¸€äº›é¢å¤–çš„ç‰¹æ€§")]),a._v(" "),e("li",[a._v("åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´éƒ¨ç½²æœ‰é™çŠ¶æ€æœº, å¹¶æä¾›é€šç”¨æ–¹æ³•, ä»¥æ­¤æ¥ç¡®ä¿ä»»æ„èŠ‚ç‚¹åœ¨æŸç§çŠ¶æ€è½¬æ¢ä¸Šä¿æŒä¸€è‡´")]),a._v(" "),e("li",[a._v("é›†ç¾¤å†…çš„èŠ‚ç‚¹éƒ½å¯¹é€‰ä¸¾å‡ºçš„é¢†è¢–é‡‡å–ä¿¡ä»»")])]),a._v(" "),e("p",[a._v("å¯è§†åŒ–æ¼”ç¤º: http://thesecretlivesofdata.com/raft/")]),a._v(" "),e("h4",{attrs:{id:"ç®—æ³•å®ç°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®—æ³•å®ç°"}},[a._v("#")]),a._v(" ç®—æ³•å®ç°")]),a._v(" "),e("p",[a._v("Rafté›†ç¾¤ä¸­æœ‰ä¸‰ç§èº«ä»½, èŠ‚ç‚¹æœ‰æœºä¼šåœ¨è¿™äº›èº«ä»½ä¹‹é—´åˆ‡æ¢:")]),a._v(" "),e("ol",[e("li",[a._v("leader é¢†è¢–")]),a._v(" "),e("li",[a._v("follower è¿½éšè€…")]),a._v(" "),e("li",[a._v("candidate å€™é€‰äºº")]),a._v(" "),e("li",[a._v("æ­£å¸¸æƒ…å†µåªä¼šæœ‰ä¸€ä¸ªleader, å…¶ä»–éƒ½æ˜¯follower")]),a._v(" "),e("li",[a._v("leaderè´Ÿè´£æ‰€æœ‰å¤–éƒ¨è¯·æ±‚, å¦‚ä¸€è¯·æ±‚ä¸æ˜¯leaderæ”¶åˆ°, ä¼šè¢«ä¼ å¯¼ç»™leader")]),a._v(" "),e("li",[a._v("leaderå‘é€å¿ƒè·³, è®©followerçŸ¥é“leaderçŠ¶æ€")]),a._v(" "),e("li",[a._v("followerè®¾è®¡è¶…æ—¶æœºåˆ¶, è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰æ”¶åˆ°å¿ƒè·³, å°±ä¼šè¿›å…¥é€‰ä¸¾çŠ¶æ€")])]),a._v(" "),e("p",[a._v("Raftå°†é—®é¢˜æ‹†æˆæ•°ä¸ªå­é—®é¢˜åˆ†å¼€è§£å†³")]),a._v(" "),e("ol",[e("li",[a._v("é¢†è¢–é€‰ä¸¾ Leader Election : å¦‚ä½•é€‰ä¸¾leader")]),a._v(" "),e("li",[a._v("è®°å½•å¤å†™ Log Replication : å¦‚ä½•ä¿è¯æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§")]),a._v(" "),e("li",[a._v("å®‰å…¨æ€§ Safety")])]),a._v(" "),e("h4",{attrs:{id:"é¢†è¢–é€‰ä¸¾-leader-election"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¢†è¢–é€‰ä¸¾-leader-election"}},[a._v("#")]),a._v(" é¢†è¢–é€‰ä¸¾ Leader Election")]),a._v(" "),e("p",[a._v("æ¦‚è¿°: ç®€å•ç‰ˆæœ¬")]),a._v(" "),e("ol",[e("li",[a._v("followerå¿ƒè·³è¶…æ—¶åˆ™å‡çº§ä¸ºcandidate, å‘å…¶ä»–èŠ‚ç‚¹å‘é€æ‹‰ç¥¨è¯·æ±‚")]),a._v(" "),e("li",[a._v("å…¶ä»–èŠ‚ç‚¹åªè¦æ”¶åˆ°è¯·æ±‚å°±åŒæ„æŠ•ç¥¨, è¿‡åŠèŠ‚ç‚¹åŒæ„, candidateç›´æ¥å½“é€‰æ–°leader")])]),a._v(" "),e("p",[a._v("ç»†èŠ‚:")]),a._v(" "),e("ol",[e("li",[e("strong",[a._v("ä»»æœŸterm")]),a._v(":")])]),a._v(" "),e("ul",[e("li",[a._v("æ¯æ¬¡æœ‰candidateè¯ç”Ÿéƒ½ä¼šå¼€å¯æ–°ä¸€è½®ä»»æœŸé€‰ä¸¾term election")]),a._v(" "),e("li",[a._v("candidateä¼šå…ˆç»™è‡ªå·±æŠ•ä¸€ç¥¨")]),a._v(" "),e("li",[a._v("åŒä¸ªä»»æœŸé€‰ä¸¾ä¸­ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æŠ•1ç¥¨, å¾€å¾€æŠ•ç»™è¯¥ä»»æœŸçš„é¦–ä¸ªæ‹‰ç¥¨è¯·æ±‚")]),a._v(" "),e("li",[a._v("å€™é€‰äººæ”¶åˆ°å…¶ä»–å€™é€‰äººçš„æ‹‰ç¥¨, æ‹‰ç¥¨ä»»æœŸä¸å°äºè‡ªå·±çš„ä»»æœŸ, è‡ªå·±ä¼šæ”¾å¼ƒç«é€‰, å¹¶åç»™å¯¹æ–¹æŠ•ç¥¨")]),a._v(" "),e("li",[a._v("å¦‚æœè¶…æ—¶åè¿˜æœªé€‰å‡ºæ–°é¢†è¢–, æ­¤ä»»æœŸç»ˆæ­¢, å¼€å§‹æ–°ä»»æœŸ")])]),a._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[a._v("election timeout: followerå¤šä¹…å‡çº§ä¸ºcandidate (åŒºé—´å†…çš„éšæœºå€¼)\n"),e("ol",[e("li",[a._v("åªè¦æ”¶åˆ°æ‹‰ç¥¨ / å¿ƒè·³, éƒ½ä¼šåˆ·æ–°è¿™ä¸ªè¶…æ—¶(è‡ªæ—‹)")])])]),a._v(" "),e("li",[a._v("ä»»æœŸé€‰ä¸¾å†·å´: æœ¬è½®ä»»æœŸé€‰ä¸¾ä¸­, å¤šä¸ªå€™é€‰è€…å¹³ç¥¨, è¿™äº›å€™é€‰è€…éœ€è¦ç»è¿‡è¿™ä¸ªè‡ªæ—‹åæ‰èƒ½ç»§ç»­ä¸‹ä¸€è½®ä»»æœŸé€‰ä¸¾")]),a._v(" "),e("li",[a._v("Raftæ¯ä¸ªæœåŠ¡å™¨çš„è¶…æ—¶æœŸé™æ˜¯éšæœºçš„, é™ä½åŒæ—¶ç«é€‰çš„æ¦‚ç‡")])]),a._v(" "),e("h4",{attrs:{id:"è®°å½•å¤å†™-log-replication"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è®°å½•å¤å†™-log-replication"}},[a._v("#")]),a._v(" è®°å½•å¤å†™ Log Replication")]),a._v(" "),e("p",[a._v("æ›´æ–°æ•°æ®çš„è´£ä»»åœ¨leaderä¸Š")]),a._v(" "),e("p",[a._v("ç®€è¦æµç¨‹:")]),a._v(" "),e("ol",[e("li",[a._v("leaderæ¥æ”¶åˆ°æ•°æ®æŒ‡ä»¤, å¹¶åšè®°å½•, ç„¶åå‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ä¿¡æ¯")]),a._v(" "),e("li",[a._v("èŠ‚ç‚¹æ”¶åˆ°åä¹Ÿå°†æ•°æ®åšè®°å½•, å¹¶è¿”å›ç¡®è®¤")]),a._v(" "),e("li",[a._v("leaderæ”¶åˆ°è¿‡åŠç¡®è®¤å, æ‰çœŸæ­£å°†æ•°æ®ä¿®æ”¹, ç»™å®¢æˆ·ç«¯å“åº”æ“ä½œæˆåŠŸ")]),a._v(" "),e("li",[a._v("leaderå‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ç¡®è®¤ä¿®æ”¹ä¿¡æ¯")])]),a._v(" "),e("p",[a._v("ç»†èŠ‚:")]),a._v(" "),e("ol",[e("li",[a._v("å…¶å®è¿™äº›ä¿¡æ¯æ˜¯éšç€å¿ƒè·³ä¸€èµ·å‘é€çš„")])]),a._v(" "),e("h4",{attrs:{id:"åˆ†åŒºå®¹é”™æ€§-partition"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºå®¹é”™æ€§-partition"}},[a._v("#")]),a._v(" åˆ†åŒºå®¹é”™æ€§ partition")]),a._v(" "),e("p",[a._v("å¦‚æœå‡ºç°äº†ç½‘ç»œåˆ†åŒºé—®é¢˜, å¯èƒ½ä¼šå½¢æˆå¤šä¸ªleaderé›†ç¾¤:")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("æ­¤å‡è®¾æƒ…å¢ƒä¸‹, æ—§leader(D)å’Œæ–°leader(B)å¯ä»¥å…±å­˜, ä½†æ–°leaderçš„termæ›´é«˜\n\t\tA\nB(L)\t\t\tC\n================== ç½‘ç»œä¸­æ–­\n \tD(L)\tE\næ­¤æ—¶, å¦‚æœBé›†ç¾¤æ”¶åˆ°è¯·æ±‚, å¦‚æœACæ­£å¸¸, æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„(æ”¶åˆ°äº†è¶³å¤Ÿå¤šçš„è¿”å›ç¡®è®¤)\nå¦‚æœDé›†ç¾¤æ”¶åˆ°è¯·æ±‚, å› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„èŠ‚ç‚¹è¿”å›ç¡®è®¤ä¿¡æ¯, æ‰€ä»¥æ˜¯ä¸å¯ç”¨çš„\n### è‡³æ­¤é¿å…äº†è„‘è£‚é—®é¢˜\nå…¶æ¬¡, å½“ç½‘ç»œåˆ†åŒºé—®é¢˜ä¿®å¤å, å°±ä¼šä»¥termæ›´é«˜çš„ä½œä¸ºleader, å¹¶å¯¹æ•°æ®è¿›è¡ŒåŒæ­¥\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])]),e("h3",{attrs:{id:"gossipåè®®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gossipåè®®"}},[a._v("#")]),a._v(" Gossipåè®®")]),a._v(" "),e("p",[a._v("ä¸€ä¸ªèŠ‚ç‚¹æƒ³è¦åˆ†äº«ä¸€äº›ä¿¡æ¯ç»™ç½‘ç»œä¸­çš„å…¶ä»–çš„ä¸€äº›èŠ‚ç‚¹ã€‚äºæ˜¯ï¼Œå®ƒ"),e("strong",[a._v("å‘¨æœŸæ€§")]),a._v("çš„"),e("strong",[a._v("éšæœº")]),a._v("é€‰æ‹©ä¸€äº›èŠ‚ç‚¹ï¼Œå¹¶æŠŠä¿¡æ¯ä¼ é€’ç»™è¿™äº›èŠ‚ç‚¹ã€‚è¿™äº›æ”¶åˆ°ä¿¡æ¯çš„èŠ‚ç‚¹æ¥ä¸‹æ¥ä¼šåšåŒæ ·çš„äº‹æƒ…ï¼Œå³æŠŠè¿™äº›ä¿¡æ¯ä¼ é€’ç»™å…¶ä»–ä¸€äº›éšæœºé€‰æ‹©çš„èŠ‚ç‚¹")]),a._v(" "),e("ul",[e("li",[a._v("æ— leader")]),a._v(" "),e("li",[a._v("ä¸æ”¯æŒæ‹œå åº­é—®é¢˜")])]),a._v(" "),e("p",[e("a",{attrs:{href:"https://tech.meituan.com/2017/04/21/mt-leaf.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("ç¾å›¢åˆ†å¸ƒå¼id leaf"),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"akfæ‹†åˆ†åŸåˆ™"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#akfæ‹†åˆ†åŸåˆ™"}},[a._v("#")]),a._v(" AKFæ‹†åˆ†åŸåˆ™")]),a._v(" "),e("ul",[e("li",[a._v("xè½´:å…¨é‡é•œåƒ,è¯»å†™åˆ†ç¦»")]),a._v(" "),e("li",[a._v("yè½´:æ ¹æ®ä¸šåŠ¡/åŠŸèƒ½æ‹†åˆ†,æ•°æ®åˆ†å¼€å­˜å‚¨")]),a._v(" "),e("li",[a._v("zè½´:åŸºäºè§„åˆ™æ‹†åˆ†/é€»è¾‘æ‹†åˆ†")])])])}),[],!1,null,null,null);t.default=v.exports}}]);