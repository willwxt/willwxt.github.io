(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{427:function(s,n,a){"use strict";a.r(n);var t=a(45),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("高性能, 内存占用小, 并发能力强 50000 并发 (tomcat 200)")]),s._v(" "),a("h2",{attrs:{id:"功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" 功能")]),s._v(" "),a("ul",[a("li",[s._v("反向代理 (正向代理)")]),s._v(" "),a("li",[s._v("负载均衡\n"),a("ul",[a("li",[s._v("轮询")]),s._v(" "),a("li",[s._v("加权轮询. 权重 (按权重分发请求, 这样小机器也可上线)")]),s._v(" "),a("li",[s._v("ip hash (根据ip绑定session, 但是down机丢失session, 所以使用redis共享session而不建议使用Nginx实现)")])])]),s._v(" "),a("li",[s._v("资源的动静分离")])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("h4",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" Windows")]),s._v(" "),a("p",[s._v("直接下载, 解压, cmd 窗口运行 Nginx.exe 命令")]),s._v(" "),a("h4",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保本机没有 nginx")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar 解压, ./configure 生成makefile make编译 make install安装到usr/local/nginx")]),s._v("\nyum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++ zlib zlib-devel openssl openssl-devel pcre pcre-devel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),a("p",[s._v("主要是 nginx.conf")]),s._v(" "),a("p",[s._v("重新读取配置")]),s._v(" "),a("ul",[a("li",[s._v("全局配置")]),s._v(" "),a("li",[s._v("event\n"),a("ul",[a("li",[s._v("连接数, 事件, 性能相关配置")])])]),s._v(" "),a("li",[s._v("http\n"),a("ul",[a("li",[s._v("http全局配置")]),s._v(" "),a("li",[s._v("upstream配置(负载均衡配置, 供location中使用)")]),s._v(" "),a("li",[s._v("server(监听端口, 代理配置)\n"),a("ul",[a("li",[s._v("listen")]),s._v(" "),a("li",[s._v("location\n"),a("ul",[a("li",[s._v("proxy_pass 代理")])])])])])])])]),s._v(" "),a("p",[s._v("其他配置请百度")]),s._v(" "),a("h4",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),a("p",[s._v("nginx")]),s._v(" "),a("p",[s._v("nginx -s stop")]),s._v(" "),a("p",[s._v("nginx -s quit")]),s._v(" "),a("p",[s._v("nginx -s reload")]),s._v(" "),a("h4",{attrs:{id:"踩坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#踩坑"}},[s._v("#")]),s._v(" 踩坑")]),s._v(" "),a("ul",[a("li",[s._v("代理名不能使用下划线 会报400")]),s._v(" "),a("li",[s._v("安装完nginx后使用 -t 查看配置文件目录 不要改错了配置文件")]),s._v(" "),a("li",[s._v("配置完成后响应速度变慢  不要使用localhost 最好使用ip 具体原因可以百度")])]),s._v(" "),a("h4",{attrs:{id:"详细脑图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#详细脑图"}},[s._v("#")]),s._v(" 详细脑图")]),s._v(" "),a("p",[s._v("https://www.processon.com/view/5aed0a8ae4b04f3db59c3b2e#map")]),s._v(" "),a("h4",{attrs:{id:"docker部署nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker部署nginx"}},[s._v("#")]),s._v(" docker部署nginx")]),s._v(" "),a("p",[s._v("参考 https://www.pianshen.com/article/3910349119/")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载镜像文件\t# 如要安装别的版本,请自带版本号")]),s._v("\ndocker pull nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 随便跑下实例")]),s._v("\ndocker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 --name nginx  -d nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将容器内的配置文件,html页面拷贝到当前目录 \t# 找不到文件会报 403 forbidden")]),s._v("\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" nginx:/etc/nginx /mydata/nginx\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" nginx:/usr/share/nginx/html /mydata/nginx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改文件名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /mydata/nginx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" nginx conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 终止容器 # 删除原容器")]),s._v("\ndocker stop nginx\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$ContainerId")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正式运行")]),s._v("\ndocker run --name nginx -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/nginx/html:/usr/share/nginx/html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/nginx/logs:/var/log/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/nginx/conf:/etc/nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d nginx\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);